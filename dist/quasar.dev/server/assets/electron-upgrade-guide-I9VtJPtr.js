import{resolveComponent as q,mergeProps as A,withCtx as o,unref as i,createVNode as n,createTextVNode as a,useSSRContext as C}from"vue";import{ssrRenderComponent as l}from"vue/server-renderer";import{c as g}from"./page-utils-C-QWsEHe.js";import{D,a as $}from"./DocPage-DKr-0pQn.js";import{D as b}from"./DocTree-Kz2iQlb5.js";import{D as m}from"./DocPrerender-DPOnWPFO.js";import{C as c}from"./CopyButton-l3ndfN49.js";import{_ as R}from"../server-entry.js";import"quasar";import"@quasar/extras/mdi-v6";import"vue-router";import"@quasar/extras/fontawesome-v5";import"@quasar/extras/fontawesome-v6";import"@quasar/extras/mdi-v7";import"quasar/icon-set/svg-mdi-v6.mjs";const W={__name:"electron-upgrade-guide",__ssrInlineRender:!0,setup(N){const v=[{id:"upgrading-electron",title:"2. Upgrading Electron"},{id:"upgrading-from-quasar-v1",title:"3. Upgrading from Quasar v1"},{id:"high-overview-of-the-improvements",title:"3.1. High overview of the improvements",sub:!0},{id:"the-src-electron-folder",title:"3.2. The /src-electron folder",sub:!0},{id:"the-electron-main-js-file",title:"3.3. The electron-main.js file",sub:!0},{id:"the-electron-preload-js-file",title:"3.4. The electron-preload.js file",sub:!0},{id:"quasar-config-file-changes",title:"3.5. quasar.config file changes",sub:!0},{id:"renderer-thread-src-",title:"3.6. Renderer thread (/src)",sub:!0},{id:"browser-devtools",title:"3.7. Browser Devtools",sub:!0}],w={oldStructure:{l:"src-electron",c:[{l:"icons",e:"Icons of your app for all platforms",c:[{l:"icon.icns",e:"Icon file for Darwin (MacOS) platform"},{l:"icon.ico",e:"Icon file for win32 (Windows) platform"},{l:"linux-512x512.png",e:"Icon file for Linux platform (when using electron-builder)"}]},{l:"main-process",c:[{l:"electron-preload.js",e:"Electron preload script (injects Node.js stuff into renderer thread)"},{l:"electron-main.dev.js",e:"Main thread code (preceded by dev code only)"},{l:"electron-main.js",e:"Main thread code (production code)"}]}]},newStructure:{l:"src-electron",c:[{l:"icons",e:"Icons of your app for all platforms",c:[{l:"icon.icns",e:"Icon file for Darwin (MacOS) platform"},{l:"icon.ico",e:"Icon file for win32 (Windows) platform"},{l:"icon.png",e:"Tray icon file for all platforms (especially Linux)"}]},{l:"electron-preload.js",e:"(or .ts) Electron preload script (injects Node.js stuff into renderer thread)"},{l:"electron-main.js",e:"(or .ts) Main thread code"}]}};return(Q,E,T,P)=>{const h=q("q-tab-panel");E(l(D,A({title:"Upgrade guide on Electron",desc:"(@quasar/app-webpack) Upgrading instructions when dealing with Electron in Quasar.",overline:"Quasar CLI with Webpack - @quasar/app-webpack",heading:"","edit-link":"quasar-cli-webpack/developing-electron-apps/electron-upgrade-guide",toc:v},P),{default:o((B,p,f,e)=>{if(p)p(`<h2 id="upgrading-electron" class="doc-heading doc-h2"${e}>Upgrading Electron</h2><p${e}>When you add the Electron mode in a Quasar project for the first time you will get the latest version of the Electron package. At some point in time, you will want to upgrade the Electron version.</p><p${e}>Before upgrading Electron, please consult its release notes. Are there breaking changes?</p>`),p(l(i(m),{tabs:["Yarn","NPM","PNPM","Bun"]},{default:o((k,s,u,t)=>{if(s)s(l(h,{class:"q-pa-none",name:"Yarn"},{default:o((j,d,y,r)=>{if(d)d(`<pre class="doc-code"${r}><code${r}><span class="token comment"${r}># from the root of your Quasar project</span>
$ <span class="token function"${r}>yarn</span> upgrade electron@latest</code></pre>`),d(l(c,{lang:"bash"},null,y,r));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ `),n("span",{class:"token function"},"yarn"),a(" upgrade electron@latest")])]),n(c,{lang:"bash"})]}),_:1},u,t)),s(l(h,{class:"q-pa-none",name:"NPM"},{default:o((j,d,y,r)=>{if(d)d(`<pre class="doc-code"${r}><code${r}><span class="token comment"${r}># from the root of your Quasar project</span>
$ <span class="token function"${r}>npm</span> <span class="token function"${r}>install</span> electron@latest</code></pre>`),d(l(c,{lang:"bash"},null,y,r));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ `),n("span",{class:"token function"},"npm"),a(),n("span",{class:"token function"},"install"),a(" electron@latest")])]),n(c,{lang:"bash"})]}),_:1},u,t)),s(l(h,{class:"q-pa-none",name:"PNPM"},{default:o((j,d,y,r)=>{if(d)d(`<pre class="doc-code"${r}><code${r}><span class="token comment"${r}># from the root of your Quasar project</span>
$ <span class="token function"${r}>pnpm</span> <span class="token function"${r}>add</span> electron@latest</code></pre>`),d(l(c,{lang:"bash"},null,y,r));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ `),n("span",{class:"token function"},"pnpm"),a(),n("span",{class:"token function"},"add"),a(" electron@latest")])]),n(c,{lang:"bash"})]}),_:1},u,t)),s(l(h,{class:"q-pa-none",name:"Bun"},{default:o((j,d,y,r)=>{if(d)d(`<pre class="doc-code"${r}><code${r}><span class="token comment"${r}># from the root of your Quasar project</span>
$ bun <span class="token function"${r}>add</span> electron@latest</code></pre>`),d(l(c,{lang:"bash"},null,y,r));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ bun `),n("span",{class:"token function"},"add"),a(" electron@latest")])]),n(c,{lang:"bash"})]}),_:1},u,t));else return[n(h,{class:"q-pa-none",name:"Yarn"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ `),n("span",{class:"token function"},"yarn"),a(" upgrade electron@latest")])]),n(c,{lang:"bash"})]),_:1}),n(h,{class:"q-pa-none",name:"NPM"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ `),n("span",{class:"token function"},"npm"),a(),n("span",{class:"token function"},"install"),a(" electron@latest")])]),n(c,{lang:"bash"})]),_:1}),n(h,{class:"q-pa-none",name:"PNPM"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ `),n("span",{class:"token function"},"pnpm"),a(),n("span",{class:"token function"},"add"),a(" electron@latest")])]),n(c,{lang:"bash"})]),_:1}),n(h,{class:"q-pa-none",name:"Bun"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ bun `),n("span",{class:"token function"},"add"),a(" electron@latest")])]),n(c,{lang:"bash"})]),_:1})]}),_:1},f,e)),p(`<h2 id="upgrading-from-quasar-v1" class="doc-heading doc-h2"${e}>Upgrading from Quasar v1</h2><p${e}>The Electron mode for Quasar v2 is an almost complete overhaul of the previous version, significantly improving the developer experience. Some of the changes here are required in order to ensure compatibility with the latest developments in the Electron world (so bulletproofing for upcoming upstream changes).</p><h3 id="high-overview-of-the-improvements" class="doc-heading doc-h3"${e}>High overview of the improvements</h3><ul${e}><li${e}><strong${e}>Out of the box support for Typescript</strong>. Just rename electron-main.js and electron-preload.js to electron-main.ts and electron-preload.ts.</li><li${e}>Support for Electron 11 and preparing out of the box support for upcoming changes in Electron 12+ (without you needing to change anything in the future). One of changes are that we’ll be using <code class="doc-token"${e}>contextIsolation</code> instead of the deprecated <code class="doc-token"${e}>Node Integration</code>.</li><li${e}>The preload script no longer has the old limitations. You can import other js files with a relative path because the script is now bundled and passed through Babel (so you can use the <code class="doc-token"${e}>import X from Y</code> syntax too). You can also enable linting for it.</li><li${e}>You can enable linting for the main thread and the preload script too.</li><li${e}>We’ve removed the default electron-main.dev.js support as it seems that it’s not needed anymore. However, you can add it back by creating it and referencing it from electron-main (it’s no longer detected by Quasar CLI automatically – because we don’t need to; more on this later).</li></ul><h3 id="the-src-electron-folder" class="doc-heading doc-h3"${e}>The /src-electron folder</h3><p${e}>The <strong${e}>old</strong> structure was:</p>`),p(l(b,{def:w.oldStructure},null,f,e)),p(`<p${e}>The <strong${e}>NEW</strong> structure is:</p>`),p(l(b,{def:w.newStructure},null,f,e)),p(`<p${e}>Notice that there’s no <code class="doc-token"${e}>electron-main.dev.js</code> file anymore (not needed anymore) and that the <code class="doc-token"${e}>electron-preload/main.js</code> files need to be moved directly under <code class="doc-token"${e}>/src-electron</code>.</p><h3 id="the-electron-main-js-file" class="doc-heading doc-h3"${e}>The electron-main.js file</h3><p${e}>In order for us to be forward compatible with future versions of Electron, you’ll need to do some small (but important!) changes:</p>`),p(l(i(m),{title:"OLD way"},{default:o((k,s,u,t)=>{if(s)s(`<pre class="doc-code"${t}><code${t}>mainWindow <span class="token operator"${t}>=</span> <span class="token keyword"${t}>new</span> <span class="token class-name"${t}>BrowserWindow</span><span class="token punctuation"${t}>(</span><span class="token punctuation"${t}>{</span>
  <span class="token comment"${t}>// ...</span>
  <span class="token literal-property property"${t}>webPreferences</span><span class="token operator"${t}>:</span> <span class="token punctuation"${t}>{</span>
    <span class="token literal-property property"${t}>nodeIntegration</span><span class="token operator"${t}>:</span> process<span class="token punctuation"${t}>.</span>env<span class="token punctuation"${t}>.</span><span class="token constant"${t}>QUASAR_NODE_INTEGRATION</span><span class="token punctuation"${t}>,</span>
    <span class="token literal-property property"${t}>nodeIntegrationInWorker</span><span class="token operator"${t}>:</span> process<span class="token punctuation"${t}>.</span>env<span class="token punctuation"${t}>.</span><span class="token constant"${t}>QUASAR_NODE_INTEGRATION</span><span class="token punctuation"${t}>,</span>
    <span class="token comment"${t}>// preload: path.resolve(__dirname, &#39;electron-preload.js&#39;)</span>
  <span class="token punctuation"${t}>}</span>
<span class="token punctuation"${t}>}</span><span class="token punctuation"${t}>)</span></code></pre>`),s(l(c,null,null,u,t));else return[n("pre",{class:"doc-code"},[n("code",null,[a("mainWindow "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"BrowserWindow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// ..."),a(`
  `),n("span",{class:"token literal-property property"},"webPreferences"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token literal-property property"},"nodeIntegration"),n("span",{class:"token operator"},":"),a(" process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"QUASAR_NODE_INTEGRATION"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token literal-property property"},"nodeIntegrationInWorker"),n("span",{class:"token operator"},":"),a(" process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"QUASAR_NODE_INTEGRATION"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token comment"},"// preload: path.resolve(__dirname, 'electron-preload.js')"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(c)]}),_:1},f,e)),p(l(i(m),{title:"NEW way"},{default:o((k,s,u,t)=>{if(s)s(`<pre class="doc-code"${t}><code${t}>mainWindow <span class="token operator"${t}>=</span> <span class="token keyword"${t}>new</span> <span class="token class-name"${t}>BrowserWindow</span><span class="token punctuation"${t}>(</span><span class="token punctuation"${t}>{</span>
  <span class="token comment"${t}>// ...</span>
  <span class="token literal-property property"${t}>webPreferences</span><span class="token operator"${t}>:</span> <span class="token punctuation"${t}>{</span>
    <span class="token comment"${t}>// we enable contextIsolation (Electron 12+ has it enabled by default anyway)</span>
    <span class="token literal-property property"${t}>contextIsolation</span><span class="token operator"${t}>:</span> <span class="token boolean"${t}>true</span><span class="token punctuation"${t}>,</span>
    <span class="token comment"${t}>// we use a new way to reference the preload script</span>
    <span class="token comment"${t}>// (it&#39;s going to be needed, so add it and create the file if it&#39;s not there already)</span>
    <span class="token literal-property property"${t}>preload</span><span class="token operator"${t}>:</span> path<span class="token punctuation"${t}>.</span><span class="token function"${t}>resolve</span><span class="token punctuation"${t}>(</span>__dirname<span class="token punctuation"${t}>,</span> process<span class="token punctuation"${t}>.</span>env<span class="token punctuation"${t}>.</span><span class="token constant"${t}>QUASAR_ELECTRON_PRELOAD</span><span class="token punctuation"${t}>)</span>
  <span class="token punctuation"${t}>}</span>
<span class="token punctuation"${t}>}</span><span class="token punctuation"${t}>)</span></code></pre>`),s(l(c,null,null,u,t));else return[n("pre",{class:"doc-code"},[n("code",null,[a("mainWindow "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"BrowserWindow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// ..."),a(`
  `),n("span",{class:"token literal-property property"},"webPreferences"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// we enable contextIsolation (Electron 12+ has it enabled by default anyway)"),a(`
    `),n("span",{class:"token literal-property property"},"contextIsolation"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token comment"},"// we use a new way to reference the preload script"),a(`
    `),n("span",{class:"token comment"},"// (it's going to be needed, so add it and create the file if it's not there already)"),a(`
    `),n("span",{class:"token literal-property property"},"preload"),n("span",{class:"token operator"},":"),a(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),a("__dirname"),n("span",{class:"token punctuation"},","),a(" process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"QUASAR_ELECTRON_PRELOAD"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(c)]}),_:1},f,e)),p(`<h3 id="the-electron-preload-js-file" class="doc-heading doc-h3"${e}>The electron-preload.js file</h3><p${e}>You will need this file if you don’t have it already. So create it if it’s missing. Without it you won’t be able to use the power of Node.js in your renderer thread.</p><p${e}>More info: `),p(l($,{to:"/quasar-cli-webpack/developing-electron-apps/electron-preload-script"},{default:o((k,s,u,t)=>{if(s)s("preload script");else return[a("preload script")]}),_:1},f,e)),p(`.</p><div class="doc-note doc-note--danger"${e}><p class="doc-note__title"${e}>WARNING</p><p${e}>You will need to transfer all the Node.js stuff away from your renderer thread (the UI code from /src) and into the preload script. Provide the same functionality through the <code class="doc-token"${e}>contextBridge</code> as seen below.</p></div><p${e}>This is the default content of <code class="doc-token"${e}>electron-preload.js</code>:</p>`),p(l(i(m),null,{default:o((k,s,u,t)=>{if(s)s(`<pre class="doc-code"${t}><code${t}><span class="token comment"${t}>/**
 * This file is used specifically for security reasons.
 * Here you can access Nodejs stuff and inject functionality into
 * the renderer thread (accessible there through the &quot;window&quot; object)
 *
 * WARNING!
 * If you import anything from node_modules, then make sure that the package is specified
 * in package.json &gt; &quot;dependencies&quot; and NOT in &quot;devDependencies&quot;
 *
 * Example (injects window.myAPI.doAThing() into renderer thread):
 *
 *   const { contextBridge } = require(&#39;electron&#39;)
 *
 *   contextBridge.exposeInMainWorld(&#39;myAPI&#39;, {
 *     doAThing: () =&gt; {}
 *   })
 */</span></code></pre>`),s(l(c,null,null,u,t));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},`/**
 * This file is used specifically for security reasons.
 * Here you can access Nodejs stuff and inject functionality into
 * the renderer thread (accessible there through the "window" object)
 *
 * WARNING!
 * If you import anything from node_modules, then make sure that the package is specified
 * in package.json > "dependencies" and NOT in "devDependencies"
 *
 * Example (injects window.myAPI.doAThing() into renderer thread):
 *
 *   const { contextBridge } = require('electron')
 *
 *   contextBridge.exposeInMainWorld('myAPI', {
 *     doAThing: () => {}
 *   })
 */`)])]),n(c)]}),_:1},f,e)),p(`<h3 id="quasar-config-file-changes" class="doc-heading doc-h3"${e}>quasar.config file changes</h3>`),p(l(i(m),{title:"OLD way"},{default:o((k,s,u,t)=>{if(s)s(`<pre class="doc-code"${t}><code${t}><span class="token literal-property property"${t}>electron</span><span class="token operator"${t}>:</span> <span class="token punctuation"${t}>{</span>
  <span class="token comment"${t}>// it&#39;s gone now (upcoming upstream breaking change)</span>
  <span class="token comment"${t}>// replaced by a change in electron-main.js documented earlier</span>
  <span class="token literal-property property"${t}>nodeIntegration</span><span class="token operator"${t}>:</span> <span class="token boolean"${t}>true</span><span class="token punctuation"${t}>,</span> <span class="token comment"${t}>// remove me!</span>

  <span class="token comment"${t}>// renamed to chainWebpackMain</span>
  <span class="token function"${t}>chainWebpack</span> <span class="token punctuation"${t}>(</span><span class="token parameter"${t}>chain</span><span class="token punctuation"${t}>)</span> <span class="token punctuation"${t}>{</span> <span class="token comment"${t}>/* ... */</span> <span class="token punctuation"${t}>}</span><span class="token punctuation"${t}>,</span>

  <span class="token comment"${t}>// renamed to extendWebpackMain</span>
  <span class="token function"${t}>extendWebpack</span> <span class="token punctuation"${t}>(</span><span class="token parameter"${t}>cfg</span><span class="token punctuation"${t}>)</span> <span class="token punctuation"${t}>{</span> <span class="token comment"${t}>/* ... */</span> <span class="token punctuation"${t}>}</span>
<span class="token punctuation"${t}>}</span></code></pre>`),s(l(c,null,null,u,t));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"electron"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// it's gone now (upcoming upstream breaking change)"),a(`
  `),n("span",{class:"token comment"},"// replaced by a change in electron-main.js documented earlier"),a(`
  `),n("span",{class:"token literal-property property"},"nodeIntegration"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token comment"},"// remove me!"),a(`

  `),n("span",{class:"token comment"},"// renamed to chainWebpackMain"),a(`
  `),n("span",{class:"token function"},"chainWebpack"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"chain"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

  `),n("span",{class:"token comment"},"// renamed to extendWebpackMain"),a(`
  `),n("span",{class:"token function"},"extendWebpack"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}")])]),n(c)]}),_:1},f,e)),p(l(i(m),{title:"NEW way"},{default:o((k,s,u,t)=>{if(s)s(`<pre class="doc-code"${t}><code${t}><span class="token literal-property property"${t}>electron</span><span class="token operator"${t}>:</span> <span class="token punctuation"${t}>{</span>
  <span class="token comment"${t}>// was renamed from chainWebpack()</span>
  <span class="token function"${t}>chainWebpackMain</span> <span class="token punctuation"${t}>(</span><span class="token parameter"${t}>chain</span><span class="token punctuation"${t}>)</span> <span class="token punctuation"${t}>{</span>
    <span class="token comment"${t}>// example for its content (adds linting)</span>
    chain<span class="token punctuation"${t}>.</span><span class="token function"${t}>plugin</span><span class="token punctuation"${t}>(</span><span class="token string"${t}>&#39;eslint-webpack-plugin&#39;</span><span class="token punctuation"${t}>)</span>
      <span class="token punctuation"${t}>.</span><span class="token function"${t}>use</span><span class="token punctuation"${t}>(</span>ESLintPlugin<span class="token punctuation"${t}>,</span> <span class="token punctuation"${t}>[</span><span class="token punctuation"${t}>{</span> <span class="token literal-property property"${t}>extensions</span><span class="token operator"${t}>:</span> <span class="token punctuation"${t}>[</span><span class="token string"${t}>&#39;js&#39;</span><span class="token punctuation"${t}>]</span> <span class="token punctuation"${t}>}</span><span class="token punctuation"${t}>]</span><span class="token punctuation"${t}>)</span>
  <span class="token punctuation"${t}>}</span><span class="token punctuation"${t}>,</span>

  <span class="token comment"${t}>// was renamed from extendWebpack()</span>
  <span class="token function"${t}>extendWebpackMain</span> <span class="token punctuation"${t}>(</span><span class="token parameter"${t}>cfg</span><span class="token punctuation"${t}>)</span> <span class="token punctuation"${t}>{</span> <span class="token comment"${t}>/* ... */</span> <span class="token punctuation"${t}>}</span><span class="token punctuation"${t}>,</span>

  <span class="token comment"${t}>// New!</span>
  <span class="token function"${t}>chainWebpackPreload</span> <span class="token punctuation"${t}>(</span><span class="token parameter"${t}>chain</span><span class="token punctuation"${t}>)</span> <span class="token punctuation"${t}>{</span>
    <span class="token comment"${t}>// example (adds linting)</span>
    chain<span class="token punctuation"${t}>.</span><span class="token function"${t}>plugin</span><span class="token punctuation"${t}>(</span><span class="token string"${t}>&#39;eslint-webpack-plugin&#39;</span><span class="token punctuation"${t}>)</span>
      <span class="token punctuation"${t}>.</span><span class="token function"${t}>use</span><span class="token punctuation"${t}>(</span>ESLintPlugin<span class="token punctuation"${t}>,</span> <span class="token punctuation"${t}>[</span><span class="token punctuation"${t}>{</span> <span class="token literal-property property"${t}>extensions</span><span class="token operator"${t}>:</span> <span class="token punctuation"${t}>[</span><span class="token string"${t}>&#39;js&#39;</span><span class="token punctuation"${t}>]</span> <span class="token punctuation"${t}>}</span><span class="token punctuation"${t}>]</span><span class="token punctuation"${t}>)</span>
  <span class="token punctuation"${t}>}</span>

  <span class="token comment"${t}>// New!</span>
  <span class="token function"${t}>extendWebpackPreload</span> <span class="token punctuation"${t}>(</span><span class="token parameter"${t}>cfg</span><span class="token punctuation"${t}>)</span> <span class="token punctuation"${t}>{</span> <span class="token comment"${t}>/* ... */</span> <span class="token punctuation"${t}>}</span>
<span class="token punctuation"${t}>}</span></code></pre>`),s(l(c,null,null,u,t));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"electron"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// was renamed from chainWebpack()"),a(`
  `),n("span",{class:"token function"},"chainWebpackMain"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"chain"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// example for its content (adds linting)"),a(`
    chain`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"plugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'eslint-webpack-plugin'"),n("span",{class:"token punctuation"},")"),a(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a("ESLintPlugin"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token literal-property property"},"extensions"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'js'"),n("span",{class:"token punctuation"},"]"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

  `),n("span",{class:"token comment"},"// was renamed from extendWebpack()"),a(`
  `),n("span",{class:"token function"},"extendWebpackMain"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

  `),n("span",{class:"token comment"},"// New!"),a(`
  `),n("span",{class:"token function"},"chainWebpackPreload"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"chain"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// example (adds linting)"),a(`
    chain`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"plugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'eslint-webpack-plugin'"),n("span",{class:"token punctuation"},")"),a(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a("ESLintPlugin"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token literal-property property"},"extensions"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'js'"),n("span",{class:"token punctuation"},"]"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`

  `),n("span",{class:"token comment"},"// New!"),a(`
  `),n("span",{class:"token function"},"extendWebpackPreload"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}")])]),n(c)]}),_:1},f,e)),p(`<h3 id="renderer-thread-src-" class="doc-heading doc-h3"${e}>Renderer thread (/src)</h3><p${e}>The `),p(l($,{to:"/options/the-q-object"},{default:o((k,s,u,t)=>{if(s)s("$q object");else return[a("$q object")]}),_:1},f,e)),p(` no longer contains the <code class="doc-token"${e}>electron</code> property. You will need to use the `),p(l($,{to:"/quasar-cli-webpack/developing-electron-apps/electron-preload-script"},{default:o((k,s,u,t)=>{if(s)s("preload script");else return[a("preload script")]}),_:1},f,e)),p(` to access it and provide it to the renderer thread.</p><p${e}>Furthermore, the `),p(l($,{to:"/quasar-utils/other-utils#open-external-url"},{default:o((k,s,u,t)=>{if(s)s("openURL");else return[a("openURL")]}),_:1},f,e)),p(` util can no longer tap into Electron to open a new window. You will need to provide your own util from the preload script.</p><div class="doc-note doc-note--danger"${e}><p class="doc-note__title"${e}>WARNING</p><p${e}>You will need to transfer all the Node.js stuff away from your renderer thread (the UI code from /src) and into the preload script. Provide the same functionality through the <code class="doc-token"${e}>contextBridge</code> as seen in the preload script section above.</p></div><h3 id="browser-devtools" class="doc-heading doc-h3"${e}>Browser Devtools</h3><p${e}>You may also want the following code in your electron-main.js to auto-open devtools while on dev mode (or prod with debugging enabled) and to disable devtools on production builds (without debugging enabled):</p>`),p(l(i(m),null,{default:o((k,s,u,t)=>{if(s)s(`<pre class="doc-code"${t}><code${t}><span class="token keyword"${t}>function</span> <span class="token function"${t}>createWindow</span> <span class="token punctuation"${t}>(</span><span class="token punctuation"${t}>)</span> <span class="token punctuation"${t}>{</span>
  mainWindow <span class="token operator"${t}>=</span> <span class="token keyword"${t}>new</span> <span class="token class-name"${t}>BrowserWindow</span><span class="token punctuation"${t}>(</span><span class="token punctuation"${t}>{</span> <span class="token comment"${t}>/* ... */</span> <span class="token punctuation"${t}>}</span><span class="token punctuation"${t}>)</span>

  <span class="token keyword"${t}>if</span> <span class="token punctuation"${t}>(</span>process<span class="token punctuation"${t}>.</span>env<span class="token punctuation"${t}>.</span><span class="token constant"${t}>DEBUGGING</span><span class="token punctuation"${t}>)</span> <span class="token punctuation"${t}>{</span>
    <span class="token comment"${t}>// if on DEV or Production with debug enabled</span>
    mainWindow<span class="token punctuation"${t}>.</span>webContents<span class="token punctuation"${t}>.</span><span class="token function"${t}>openDevTools</span><span class="token punctuation"${t}>(</span><span class="token punctuation"${t}>)</span>
  <span class="token punctuation"${t}>}</span>
  <span class="token keyword"${t}>else</span> <span class="token punctuation"${t}>{</span>
    <span class="token comment"${t}>// we&#39;re on production; no access to devtools pls</span>
    mainWindow<span class="token punctuation"${t}>.</span>webContents<span class="token punctuation"${t}>.</span><span class="token function"${t}>on</span><span class="token punctuation"${t}>(</span><span class="token string"${t}>&#39;devtools-opened&#39;</span><span class="token punctuation"${t}>,</span> <span class="token punctuation"${t}>(</span><span class="token punctuation"${t}>)</span> <span class="token operator"${t}>=&gt;</span> <span class="token punctuation"${t}>{</span>
      mainWindow<span class="token punctuation"${t}>.</span>webContents<span class="token punctuation"${t}>.</span><span class="token function"${t}>closeDevTools</span><span class="token punctuation"${t}>(</span><span class="token punctuation"${t}>)</span>
    <span class="token punctuation"${t}>}</span><span class="token punctuation"${t}>)</span>
  <span class="token punctuation"${t}>}</span>
<span class="token punctuation"${t}>}</span></code></pre>`),s(l(c,null,null,u,t));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"createWindow"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  mainWindow `),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"BrowserWindow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`

  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"DEBUGGING"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// if on DEV or Production with debug enabled"),a(`
    mainWindow`),n("span",{class:"token punctuation"},"."),a("webContents"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"openDevTools"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
  `),n("span",{class:"token keyword"},"else"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// we're on production; no access to devtools pls"),a(`
    mainWindow`),n("span",{class:"token punctuation"},"."),a("webContents"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'devtools-opened'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      mainWindow`),n("span",{class:"token punctuation"},"."),a("webContents"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"closeDevTools"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}")])]),n(c)]}),_:1},f,e));else return[n("h2",{id:"upgrading-electron",class:"doc-heading doc-h2",onClick:k=>i(g)("upgrading-electron")},"Upgrading Electron",8,["onClick"]),n("p",null,"When you add the Electron mode in a Quasar project for the first time you will get the latest version of the Electron package. At some point in time, you will want to upgrade the Electron version."),n("p",null,"Before upgrading Electron, please consult its release notes. Are there breaking changes?"),n(i(m),{tabs:["Yarn","NPM","PNPM","Bun"]},{default:o(()=>[n(h,{class:"q-pa-none",name:"Yarn"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ `),n("span",{class:"token function"},"yarn"),a(" upgrade electron@latest")])]),n(c,{lang:"bash"})]),_:1}),n(h,{class:"q-pa-none",name:"NPM"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ `),n("span",{class:"token function"},"npm"),a(),n("span",{class:"token function"},"install"),a(" electron@latest")])]),n(c,{lang:"bash"})]),_:1}),n(h,{class:"q-pa-none",name:"PNPM"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ `),n("span",{class:"token function"},"pnpm"),a(),n("span",{class:"token function"},"add"),a(" electron@latest")])]),n(c,{lang:"bash"})]),_:1}),n(h,{class:"q-pa-none",name:"Bun"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"# from the root of your Quasar project"),a(`
$ bun `),n("span",{class:"token function"},"add"),a(" electron@latest")])]),n(c,{lang:"bash"})]),_:1})]),_:1}),n("h2",{id:"upgrading-from-quasar-v1",class:"doc-heading doc-h2",onClick:k=>i(g)("upgrading-from-quasar-v1")},"Upgrading from Quasar v1",8,["onClick"]),n("p",null,"The Electron mode for Quasar v2 is an almost complete overhaul of the previous version, significantly improving the developer experience. Some of the changes here are required in order to ensure compatibility with the latest developments in the Electron world (so bulletproofing for upcoming upstream changes)."),n("h3",{id:"high-overview-of-the-improvements",class:"doc-heading doc-h3",onClick:k=>i(g)("high-overview-of-the-improvements")},"High overview of the improvements",8,["onClick"]),n("ul",null,[n("li",null,[n("strong",null,"Out of the box support for Typescript"),a(". Just rename electron-main.js and electron-preload.js to electron-main.ts and electron-preload.ts.")]),n("li",null,[a("Support for Electron 11 and preparing out of the box support for upcoming changes in Electron 12+ (without you needing to change anything in the future). One of changes are that we’ll be using "),n("code",{class:"doc-token"},"contextIsolation"),a(" instead of the deprecated "),n("code",{class:"doc-token"},"Node Integration"),a(".")]),n("li",null,[a("The preload script no longer has the old limitations. You can import other js files with a relative path because the script is now bundled and passed through Babel (so you can use the "),n("code",{class:"doc-token"},"import X from Y"),a(" syntax too). You can also enable linting for it.")]),n("li",null,"You can enable linting for the main thread and the preload script too."),n("li",null,"We’ve removed the default electron-main.dev.js support as it seems that it’s not needed anymore. However, you can add it back by creating it and referencing it from electron-main (it’s no longer detected by Quasar CLI automatically – because we don’t need to; more on this later).")]),n("h3",{id:"the-src-electron-folder",class:"doc-heading doc-h3",onClick:k=>i(g)("the-src-electron-folder")},"The /src-electron folder",8,["onClick"]),n("p",null,[a("The "),n("strong",null,"old"),a(" structure was:")]),n(b,{def:w.oldStructure},null,8,["def"]),n("p",null,[a("The "),n("strong",null,"NEW"),a(" structure is:")]),n(b,{def:w.newStructure},null,8,["def"]),n("p",null,[a("Notice that there’s no "),n("code",{class:"doc-token"},"electron-main.dev.js"),a(" file anymore (not needed anymore) and that the "),n("code",{class:"doc-token"},"electron-preload/main.js"),a(" files need to be moved directly under "),n("code",{class:"doc-token"},"/src-electron"),a(".")]),n("h3",{id:"the-electron-main-js-file",class:"doc-heading doc-h3",onClick:k=>i(g)("the-electron-main-js-file")},"The electron-main.js file",8,["onClick"]),n("p",null,"In order for us to be forward compatible with future versions of Electron, you’ll need to do some small (but important!) changes:"),n(i(m),{title:"OLD way"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[a("mainWindow "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"BrowserWindow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// ..."),a(`
  `),n("span",{class:"token literal-property property"},"webPreferences"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token literal-property property"},"nodeIntegration"),n("span",{class:"token operator"},":"),a(" process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"QUASAR_NODE_INTEGRATION"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token literal-property property"},"nodeIntegrationInWorker"),n("span",{class:"token operator"},":"),a(" process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"QUASAR_NODE_INTEGRATION"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token comment"},"// preload: path.resolve(__dirname, 'electron-preload.js')"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(c)]),_:1}),n(i(m),{title:"NEW way"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[a("mainWindow "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"BrowserWindow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// ..."),a(`
  `),n("span",{class:"token literal-property property"},"webPreferences"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// we enable contextIsolation (Electron 12+ has it enabled by default anyway)"),a(`
    `),n("span",{class:"token literal-property property"},"contextIsolation"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token comment"},"// we use a new way to reference the preload script"),a(`
    `),n("span",{class:"token comment"},"// (it's going to be needed, so add it and create the file if it's not there already)"),a(`
    `),n("span",{class:"token literal-property property"},"preload"),n("span",{class:"token operator"},":"),a(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),a("__dirname"),n("span",{class:"token punctuation"},","),a(" process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"QUASAR_ELECTRON_PRELOAD"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(c)]),_:1}),n("h3",{id:"the-electron-preload-js-file",class:"doc-heading doc-h3",onClick:k=>i(g)("the-electron-preload-js-file")},"The electron-preload.js file",8,["onClick"]),n("p",null,"You will need this file if you don’t have it already. So create it if it’s missing. Without it you won’t be able to use the power of Node.js in your renderer thread."),n("p",null,[a("More info: "),n($,{to:"/quasar-cli-webpack/developing-electron-apps/electron-preload-script"},{default:o(()=>[a("preload script")]),_:1}),a(".")]),n("div",{class:"doc-note doc-note--danger"},[n("p",{class:"doc-note__title"},"WARNING"),n("p",null,[a("You will need to transfer all the Node.js stuff away from your renderer thread (the UI code from /src) and into the preload script. Provide the same functionality through the "),n("code",{class:"doc-token"},"contextBridge"),a(" as seen below.")])]),n("p",null,[a("This is the default content of "),n("code",{class:"doc-token"},"electron-preload.js"),a(":")]),n(i(m),null,{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},`/**
 * This file is used specifically for security reasons.
 * Here you can access Nodejs stuff and inject functionality into
 * the renderer thread (accessible there through the "window" object)
 *
 * WARNING!
 * If you import anything from node_modules, then make sure that the package is specified
 * in package.json > "dependencies" and NOT in "devDependencies"
 *
 * Example (injects window.myAPI.doAThing() into renderer thread):
 *
 *   const { contextBridge } = require('electron')
 *
 *   contextBridge.exposeInMainWorld('myAPI', {
 *     doAThing: () => {}
 *   })
 */`)])]),n(c)]),_:1}),n("h3",{id:"quasar-config-file-changes",class:"doc-heading doc-h3",onClick:k=>i(g)("quasar-config-file-changes")},"quasar.config file changes",8,["onClick"]),n(i(m),{title:"OLD way"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"electron"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// it's gone now (upcoming upstream breaking change)"),a(`
  `),n("span",{class:"token comment"},"// replaced by a change in electron-main.js documented earlier"),a(`
  `),n("span",{class:"token literal-property property"},"nodeIntegration"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token comment"},"// remove me!"),a(`

  `),n("span",{class:"token comment"},"// renamed to chainWebpackMain"),a(`
  `),n("span",{class:"token function"},"chainWebpack"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"chain"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

  `),n("span",{class:"token comment"},"// renamed to extendWebpackMain"),a(`
  `),n("span",{class:"token function"},"extendWebpack"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}")])]),n(c)]),_:1}),n(i(m),{title:"NEW way"},{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"electron"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// was renamed from chainWebpack()"),a(`
  `),n("span",{class:"token function"},"chainWebpackMain"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"chain"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// example for its content (adds linting)"),a(`
    chain`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"plugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'eslint-webpack-plugin'"),n("span",{class:"token punctuation"},")"),a(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a("ESLintPlugin"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token literal-property property"},"extensions"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'js'"),n("span",{class:"token punctuation"},"]"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

  `),n("span",{class:"token comment"},"// was renamed from extendWebpack()"),a(`
  `),n("span",{class:"token function"},"extendWebpackMain"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

  `),n("span",{class:"token comment"},"// New!"),a(`
  `),n("span",{class:"token function"},"chainWebpackPreload"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"chain"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// example (adds linting)"),a(`
    chain`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"plugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'eslint-webpack-plugin'"),n("span",{class:"token punctuation"},")"),a(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a("ESLintPlugin"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token literal-property property"},"extensions"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'js'"),n("span",{class:"token punctuation"},"]"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`

  `),n("span",{class:"token comment"},"// New!"),a(`
  `),n("span",{class:"token function"},"extendWebpackPreload"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}")])]),n(c)]),_:1}),n("h3",{id:"renderer-thread-src-",class:"doc-heading doc-h3",onClick:k=>i(g)("renderer-thread-src-")},"Renderer thread (/src)",8,["onClick"]),n("p",null,[a("The "),n($,{to:"/options/the-q-object"},{default:o(()=>[a("$q object")]),_:1}),a(" no longer contains the "),n("code",{class:"doc-token"},"electron"),a(" property. You will need to use the "),n($,{to:"/quasar-cli-webpack/developing-electron-apps/electron-preload-script"},{default:o(()=>[a("preload script")]),_:1}),a(" to access it and provide it to the renderer thread.")]),n("p",null,[a("Furthermore, the "),n($,{to:"/quasar-utils/other-utils#open-external-url"},{default:o(()=>[a("openURL")]),_:1}),a(" util can no longer tap into Electron to open a new window. You will need to provide your own util from the preload script.")]),n("div",{class:"doc-note doc-note--danger"},[n("p",{class:"doc-note__title"},"WARNING"),n("p",null,[a("You will need to transfer all the Node.js stuff away from your renderer thread (the UI code from /src) and into the preload script. Provide the same functionality through the "),n("code",{class:"doc-token"},"contextBridge"),a(" as seen in the preload script section above.")])]),n("h3",{id:"browser-devtools",class:"doc-heading doc-h3",onClick:k=>i(g)("browser-devtools")},"Browser Devtools",8,["onClick"]),n("p",null,"You may also want the following code in your electron-main.js to auto-open devtools while on dev mode (or prod with debugging enabled) and to disable devtools on production builds (without debugging enabled):"),n(i(m),null,{default:o(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"createWindow"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  mainWindow `),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"BrowserWindow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token comment"},"/* ... */"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`

  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"DEBUGGING"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// if on DEV or Production with debug enabled"),a(`
    mainWindow`),n("span",{class:"token punctuation"},"."),a("webContents"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"openDevTools"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
  `),n("span",{class:"token keyword"},"else"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// we're on production; no access to devtools pls"),a(`
    mainWindow`),n("span",{class:"token punctuation"},"."),a("webContents"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'devtools-opened'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      mainWindow`),n("span",{class:"token punctuation"},"."),a("webContents"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"closeDevTools"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}")])]),n(c)]),_:1})]}),_:1},T))}}},x=W.setup;W.setup=(N,v)=>{const w=C();return(w.modules||(w.modules=new Set)).add("src/pages/quasar-cli-webpack/developing-electron-apps/electron-upgrade-guide.md"),x?x(N,v):void 0};const I=R(W,[["__file","electron-upgrade-guide.md"]]);export{I as default};
