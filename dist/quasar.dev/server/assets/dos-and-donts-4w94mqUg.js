import{mergeProps as k,withCtx as r,createTextVNode as o,createVNode as t,unref as s,useSSRContext as D}from"vue";import{ssrRenderComponent as d}from"vue/server-renderer";import{c as u}from"./page-utils-C-QWsEHe.js";import{D as O,a as l}from"./DocPage-DKr-0pQn.js";import{_ as T}from"../server-entry.js";import"quasar";import"@quasar/extras/mdi-v6";import"vue-router";import"@quasar/extras/fontawesome-v5";import"@quasar/extras/fontawesome-v6";import"@quasar/extras/mdi-v7";import"quasar/icon-set/svg-mdi-v6.mjs";const p={__name:"dos-and-donts",__ssrInlineRender:!0,setup(f){const m=[{id:"vue-security-risks",title:"2. Vue Security Risks"},{id:"user-input-and-the-dangers-of-v-html",title:"2.1. User Input and the Dangers of v-html",sub:!0},{id:"vue-i18n",title:"2.2. vue-i18n",sub:!0},{id:"eval-",title:"2.3. eval()",sub:!0},{id:"quasar-components",title:"3. Quasar Components"},{id:"qselect",title:"3.1. QSelect",sub:!0},{id:"qchat-and-emoji",title:"3.2. QChat & Emoji",sub:!0},{id:"loading",title:"3.3. Loading",sub:!0},{id:"notify",title:"3.4. Notify",sub:!0},{id:"dialog",title:"3.5. Dialog",sub:!0},{id:"qinput",title:"3.6. QInput",sub:!0},{id:"qeditor",title:"3.7. QEditor",sub:!0},{id:"dealing-with-files",title:"4. Dealing with Files"},{id:"images",title:"4.1. Images",sub:!0},{id:"archives",title:"4.2. Archives",sub:!0},{id:"passwords",title:"5. Passwords"},{id:"cryptography",title:"6. Cryptography"},{id:"distribution",title:"7. Distribution"},{id:"web",title:"7.1. Web",sub:!0},{id:"cordova-capacitor",title:"7.2. Cordova / Capacitor",sub:!0},{id:"electron",title:"7.3. Electron",sub:!0},{id:"ssr",title:"7.4. SSR",sub:!0},{id:"environmental-safety",title:"8. Environmental Safety"},{id:"operational-security",title:"8.1. Operational Security",sub:!0},{id:"organizational-and-repository-security",title:"8.2. Organizational & Repository Security",sub:!0},{id:"final-note",title:"9. Final Note"}];return(y,b,w,$)=>{b(d(O,k({title:"Security DO's and DON'Ts",desc:"The list of Quasar security recommendations.",heading:"","edit-link":"security/dos-and-donts",toc:m},$),{default:r((S,a,c,e)=>{if(a)a(`<p${e}><strong${e}>DO</strong> periodically review the security of your application, because any lapse may be putting yourself, your team, your users and even your server at risk of serious exploitation. <strong${e}>DON’T</strong> ignore this page because you think you know everything.</p><p${e}>We have collected some best practices for those of you new to the security theater and a few insights for security professionals new to the Vue ecosystem. We will be revising and adding to this document as we become aware of risks through our own research and the publications of the amazing security community.</p><p${e}><img src="https://cdn.quasar.dev/img/secure-gold-hero.jpg" alt="" title="Quasar Audited - Gold" class="doc-img"${e}></p><h2 id="vue-security-risks" class="doc-heading doc-h2"${e}>Vue Security Risks</h2><h3 id="user-input-and-the-dangers-of-v-html" class="doc-heading doc-h3"${e}>User Input and the Dangers of v-html</h3><p${e}>The <code class="doc-token"${e}>v-html</code> directive is a wonderful way to programmatically render markup, but even the Vue docs come with `),a(d(l,{to:"https://vuejs.org/api/built-in-directives.html#v-html"},{default:r((n,i,h,g)=>{if(i)i("this warning");else return[o("this warning")]}),_:1},c,e)),a(`:</p><blockquote class="doc-note"${e}><p${e}>“Dynamically rendering arbitrary HTML on your website can be very dangerous because it can easily lead to XSS vulnerabilities. Only use HTML interpolation on trusted content and never on user-provided content.”</p></blockquote><p${e}>If you don’t know what that means, take a quick look at what OWASP has to say about `),a(d(l,{to:"https://owasp.org/www-community/attacks/xss/"},{default:r((n,i,h,g)=>{if(i)i("XSS (aka cross-site scripting)");else return[o("XSS (aka cross-site scripting)")]}),_:1},c,e)),a(`.</p><p${e}>To be fair, this <em${e}>is</em> good advice, but <strong${e}>DON’T</strong> be all hand-wavy. <strong${e}>DO</strong> think like an attacker who will innovate, social engineer, lie, phish and steal their way into your systems. What if a webpack loader exploit arises and changes your page in an evil way? What if someone makes a dastardly and ill-intentioned PR? What if suddenly a third party API changes and instead of plaintext starts sending the same structure but with different content? What if the systems you thought were safe turn out to actually have been backdoored? What if a junior dev makes an accidental and fundamentally threatening change to the code that isn’t reviewed properly? (Yes, idiocy is sometimes as dangerous as bad intentions!) The point is, <strong${e}>DO</strong> anticipate the unexpected by preparing for the absolute worst case scenario and hardening all of your systems.</p><p${e}><strong${e}>DO</strong> use the <code class="doc-token"${e}>v-pre</code> directive if you need to take extra precaution.</p><h3 id="vue-i18n" class="doc-heading doc-h3"${e}>vue-i18n</h3><p${e}>The quasi-official internationali(s/z)ation package for Vue allows you to store html in your key’s values and `),a(d(l,{to:"https://kazupon.github.io/vue-i18n/guide/formatting.html#html-formatting"},{default:r((n,i,h,g)=>{if(i)i("potentially render them");else return[o("potentially render them")]}),_:1},c,e)),a(`. If users can’t modify these values, you should be ok - but make sure you trust (aka review) the translators! Our recommendation (although it is more work and will slow-down HMR) is <strong${e}>DO</strong> use `),a(d(l,{to:"https://kazupon.github.io/vue-i18n/guide/interpolation.html#basic-usage"},{default:r((n,i,h,g)=>{if(i)i("template interpolation");else return[o("template interpolation")]}),_:1},c,e)),a(`.</p><h3 id="eval-" class="doc-heading doc-h3"${e}>eval()</h3><p${e}>Although you may be tempted to use <code class="doc-token"${e}>eval()</code>, even if you know what you are doing, just <strong${e}>DON’T</strong>.</p><p${e}><img src="https://cdn.quasar.dev/img/dont-be-eval.png" alt="" title="Don&#39;t be eval()" class="doc-img"${e}></p><h2 id="quasar-components" class="doc-heading doc-h2"${e}>Quasar Components</h2><p${e}>Some Quasar components and Plugins can be configured to allow rendering of “insecure content”. This is an opt-in feature that is performed by using <code class="doc-token"${e}>*-html</code> type boolean props. These components are discussed below.</p><h3 id="qselect" class="doc-heading doc-h3"${e}>QSelect</h3><p${e}>If you are not customizing menu-related scoped-slots (i.e. <code class="doc-token"${e}>option</code> scoped slot), <strong${e}>DO</strong> prevent the component from rendering HTML (by not enabling it through the component props) in the labels and sublabels. Generally speaking, this is not user-supplied data. If you are customizing this slot, it is your responsibility to do sanitization yourself.</p><h3 id="qchat-and-emoji" class="doc-heading doc-h3"${e}>QChat &amp; Emoji</h3><p${e}>The <code class="doc-token"${e}>QChatMessage</code> component does not display content as HTML by default. But you can enable it (through the <code class="doc-token"${e}>*-html</code> props) in which case you should sanitize the content.</p><div class="doc-note doc-note--tip"${e}><p class="doc-note__title"${e}>TIP</p><p${e}>There have been a number of recent exploits (especially for older Android and iOS devices) where certain emoji and non-standard UTF-8 actually triggered mobile device restarts and boot-screen loops. <strong${e}>DO</strong> consider a devland integration of markdown parsing in a plain-text type of input field and render it to HTML on the server side before you pass it to the chat recipients.</p></div><h3 id="loading" class="doc-heading doc-h3"${e}>Loading</h3><p${e}>Many developers have asked that the Loading plugin be able to display HTML, so this was enabled by default, but if you are worried, <strong${e}>DO</strong> add <code class="doc-token"${e}>sanitize: true</code> and you removed the vector.</p><h3 id="notify" class="doc-heading doc-h3"${e}>Notify</h3><p${e}>Being able to style the Notify plugin with HTML is not enabled by default, but if you do set the boolean prop <code class="doc-token"${e}>html: true</code> then you are responsible for sanitizing it.</p><h3 id="dialog" class="doc-heading doc-h3"${e}>Dialog</h3><p${e}>Being able to style the Dialog plugin with HTML is not enabled by default, but if you do set the boolean prop <code class="doc-token"${e}>html: true</code> then you are responsible for sanitizing the title and message.</p><h3 id="qinput" class="doc-heading doc-h3"${e}>QInput</h3><p${e}>Any field that enables users to enter keystrokes, paste from the buffer or drop a file is a security risk. We won’t go into the nitty-gritty details of this, but just remember it is YOUR responsibility to maintain safety. Only you can prevent help-desk fires!</p><h3 id="qeditor" class="doc-heading doc-h3"${e}>QEditor</h3><p${e}>This component allows the users to actually create HTML (and even paste it). If you are going to be saving this and showing it to other users, care will be needed on the server-side to validate it. In that case <strong${e}>DO</strong> strip out <code class="doc-token"${e}>&lt;script&gt;&lt;/script&gt;</code> and <code class="doc-token"${e}>&lt;iframe&gt;&lt;/iframe&gt;</code>. You can visit the `),a(d(l,{to:"/vue-components/editor#example--default-editor"},{default:r((n,i,h,g)=>{if(i)i("v-html vs. double-moustache");else return[o("v-html vs. double-moustache")]}),_:1},c,e)),a(` example in the docs to play around with the QEditor component and see what the two rendering methods will provide. There is NO <code class="doc-token"${e}>sanitize</code> tag for QEditor. Further, if you create custom buttons, it is your responsibility to make them safe. You have been warned.</p><h2 id="dealing-with-files" class="doc-heading doc-h2"${e}>Dealing with Files</h2><p${e}>So how do you validate and sanitize a file? Well, although this is a bit out of scope for a “front-end-framework”, we know that many of you reading this will also be storing user-created files on servers. If you are just storing them (and not processing them in any way), <strong${e}>DO</strong> validate that the file is of the appropriate type by detecting the `),a(d(l,{to:"https://en.wikipedia.org/wiki/List_of_file_signatures"},{default:r((n,i,h,g)=>{if(i)i("magic numbers");else return[o("magic numbers")]}),_:1},c,e)),a(`. <strong${e}>DO</strong> consider using ClamAV to check files for known viral signatures.</p><h3 id="images" class="doc-heading doc-h3"${e}>Images</h3><p${e}>If you are allowing users to upload images to your server, you should know that many commonly used modules merely check the file suffix. It is trivial to craft an image that only superficially appears to be an image. <strong${e}>DO</strong> verify that the file is what it claims to be by checking the magic numbers and for this consider using `),a(d(l,{to:"https://github.com/sindresorhus/image-type"},{default:r((n,i,h,g)=>{if(i)i("is-image");else return[o("is-image")]}),_:1},c,e)),a(". While you could check the magic number in the browser "),a(d(l,{to:"https://medium.com/the-everyday-developer/detect-file-mime-type-using-magic-numbers-and-javascript-16bc513d4e1e"},{default:r((n,i,h,g)=>{if(i)i("with this method");else return[o("with this method")]}),_:1},c,e)),a(", another approach is to let the user load an image into a canvas and then upload directly from the canvas. "),a(d(l,{to:"https://github.com/zhanziyang/vue-croppa"},{default:r((n,i,h,g)=>{if(i)i("Vue-croppa");else return[o("Vue-croppa")]}),_:1},c,e)),a(` is great front-end tool to do this.</p><h3 id="archives" class="doc-heading doc-h3"${e}>Archives</h3><p${e}>Archive decompression attacks for directory traversal are a real security issue and are virtually impossible to detect without decompressing the file. If you can get away with NOT accepting this type of media, then do it. Otherwise, on linux <strong${e}>DO</strong> use the humble <code class="doc-token"${e}>less</code> / <code class="doc-token"${e}>lesspipe</code> and <code class="doc-token"${e}>.lessfilter</code> for preprocessing these files with your custom workflows.</p><h2 id="passwords" class="doc-heading doc-h2"${e}>Passwords</h2><p${e}><strong${e}>DON’T</strong> save passwords in plaintext, in fact - <strong${e}>DON’T</strong> save them at all. <strong${e}>DO</strong> save secure hashes and compute them in memory according to a scheme using secure salt and proper algorithms. <strong${e}>DO</strong> limit the length of passwords (both minimum and maximum number of characters) BUT make the upper limit high enough that no legitimate user will ever hit. <strong${e}>DO</strong> consider a highly secure application flow for password resetting and enable the user to configure it according to their preferences. This is a process unique to every project, so we can’t tell you how to solve the problem. Nevertheless here are a few good links:</p><ul${e}><li${e}>`),a(d(l,{to:"https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Choosing_and_Using_Security_Questions_Cheat_Sheet.md"},{default:r((n,i,h,g)=>{if(i)i("OWASP cheatsheet");else return[o("OWASP cheatsheet")]}),_:1},c,e)),a(`</li><li${e}>`),a(d(l,{to:"https://fidoalliance.org/recommended-account-recovery-practices/"},{default:r((n,i,h,g)=>{if(i)i("FIDO Guidelines");else return[o("FIDO Guidelines")]}),_:1},c,e)),a(`</li></ul><h2 id="cryptography" class="doc-heading doc-h2"${e}>Cryptography</h2><ul${e}><li${e}><strong${e}>DON’T</strong> create your own cryptographic solution</li><li${e}><strong${e}>DON’T</strong> store personal information in plaintext</li><li${e}><strong${e}>DON’T</strong> create your own cryptographic solution <em${e}>(intentionally repeating it)</em></li><li${e}><strong${e}>DON’T</strong> ignore any aspect of implementation details</li><li${e}><strong${e}>DON’T</strong> create your own cryptographic solution <em${e}>(intentionally repeating it)</em></li><li${e}><strong${e}>DON’T</strong> use MD5 or SHA1</li><li${e}><strong${e}>DON’T</strong> create your `),a(d(l,{to:"https://about.unimelb.edu.au/newsroom/news/2019/march/researchers-find-trapdoor-in-swissvote-election-system"},{default:r((n,i,h,g)=>{if(i)i("own cryptographic solution");else return[o("own cryptographic solution")]}),_:1},c,e)),a(`</li></ul><p${e}>A great place to read about this topic and properly choose an industrial strength solution is `),a(d(l,{to:"https://download.libsodium.org/doc/"},{default:r((n,i,h,g)=>{if(i)i("libsodium");else return[o("libsodium")]}),_:1},c,e)),a(`</p><h2 id="distribution" class="doc-heading doc-h2"${e}>Distribution</h2><div class="doc-note doc-note--tip"${e}><p class="doc-note__title"${e}>TIP</p><p${e}>If someone wants to change something in your database or add some file to the server and they are not using an SSH key, <strong${e}>DO</strong> validate <strong${e}>AND</strong> sanitize the input.</p></div><h3 id="web" class="doc-heading doc-h3"${e}>Web</h3><ul${e}><li${e}><strong${e}>DON’T</strong> use http</li><li${e}><strong${e}>DON’T</strong> store sensitive data in JWT</li><li${e}><strong${e}>DO</strong> Use https / wss</li><li${e}><strong${e}>DO</strong> manually audit your certificates</li><li${e}><strong${e}>DO</strong> validate users</li><li${e}><strong${e}>DO</strong> remember that JWT isn’t encrypted per sé</li><li${e}><strong${e}>DO</strong> use JWE instead of JWT and use AES256 CBC + HMAC SHA512</li><li${e}><strong${e}>DO</strong> double-down and perform the complete OWASP web audit</li></ul><h3 id="cordova-capacitor" class="doc-heading doc-h3"${e}>Cordova / Capacitor</h3><ul${e}><li${e}><strong${e}>DON’T</strong> use iframes</li><li${e}><strong${e}>DON’T</strong> package for Android Gingerbread</li><li${e}><strong${e}>DO</strong> sign all your builds</li><li${e}><strong${e}>DO</strong> encrypt all data at rest</li></ul><p${e}>The `),a(d(l,{to:"https://cordova.apache.org/docs/en/latest/guide/appdev/security/"},{default:r((n,i,h,g)=>{if(i)i("Cordova Docs Page");else return[o("Cordova Docs Page")]}),_:1},c,e)),a(` goes into detail about securing Cordova, and although it seems outdated, the information is mostly still on point.</p><h3 id="electron" class="doc-heading doc-h3"${e}>Electron</h3><p${e}>Electron is a very special case, because XSS and remote code injection can actually lead to complete compromise of the end-user’s (or even developer’s) device.</p><ul${e}><li${e}><strong${e}>DON’T</strong> disable <code class="doc-token"${e}>websecurity</code></li><li${e}><strong${e}>DON’T</strong> enable remote code execution</li><li${e}><strong${e}>DO</strong> read our guidelines for enhanced `),a(d(l,{to:"/quasar-cli/developing-electron-apps/electron-security-concerns"},{default:r((n,i,h,g)=>{if(i)i("Electron Safety");else return[o("Electron Safety")]}),_:1},c,e)),a(`.</li></ul><h3 id="ssr" class="doc-heading doc-h3"${e}>SSR</h3><p${e}>When you generate your project with the SSR mode, you are provided with a minimal Express server. It is your responsibility to harden your environment to protect your server and your users. To this end, we have provided a collection of important HEADERS that you can consider and should selectively activate before your project enters the production phase (see <code class="doc-token"${e}>src-ssr/index.js</code>). It is important to remember, that HEADERS are not bulletproof, because it is up to Browser vendors to respect them - and for example `),a(d(l,{to:"https://bugs.chromium.org/p/chromium/issues/detail?id=413851"},{default:r((n,i,h,g)=>{if(i)i("Chrome will break PDF viewing");else return[o("Chrome will break PDF viewing")]}),_:1},c,e)),a(` if your Content Security Policy uses the <code class="doc-token"${e}>sandbox</code> value.</p><ul${e}><li${e}><strong${e}>DON’T</strong> forget to set restrictive headers</li><li${e}><strong${e}>DON’T</strong> think that headers alone will protect you from all attacks</li><li${e}><strong${e}>DO</strong> read about `),a(d(l,{to:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers"},{default:r((n,i,h,g)=>{if(i)i("headers");else return[o("headers")]}),_:1},c,e)),a(`</li></ul><h2 id="environmental-safety" class="doc-heading doc-h2"${e}>Environmental Safety</h2><p${e}>Being more safe means taking many things into consideration, and the more of the following guidelines you respect, the smaller the attack footprint will be.</p><p${e}><img src="https://cdn.quasar.dev/img/lets-encrypt.jpg" alt="" title="Valid SSL certificate" class="doc-img"${e}></p><h3 id="operational-security" class="doc-heading doc-h3"${e}>Operational Security</h3><p${e}>Audit how your development systems work:</p><ul${e}><li${e}><strong${e}>DON’T</strong> retain unneeded software</li><li${e}><strong${e}>DO</strong> use an OS and distro with a smaller footprint and security features enabled (like SELinux for example)</li><li${e}><strong${e}>DO</strong> make sure ALL software on your machine is up to date (especially NODE)</li><li${e}><strong${e}>DO</strong> use a password manager</li><li${e}><strong${e}>DO</strong> Use 2FA everywhere possible</li></ul><p${e}>Audit how your production environment works:</p><ul${e}><li${e}><strong${e}>DON’T</strong> think security through obscurity will help you when you are under attack</li><li${e}><strong${e}>DON’T</strong> leave unneeded ports open</li><li${e}><strong${e}>DON’T</strong> pretend containers or VM’s keep you safe by their nature</li><li${e}><strong${e}>DON’T</strong> ever stop being paranoid</li><li${e}><strong${e}>DO</strong> turn off password and root access to your server</li><li${e}><strong${e}>DO</strong> use secure transfer protocols (SSH, HTTPS, SFTP, WSS)</li><li${e}><strong${e}>DO</strong> install fail2ban and rkhunter</li><li${e}><strong${e}>DO</strong> regularly analyze your logs</li><li${e}><strong${e}>DO</strong> encrypt data at rest</li><li${e}><strong${e}>DO</strong> use advanced media-type analysis</li><li${e}><strong${e}>DO</strong> use ClamAV to detect infected files</li><li${e}><strong${e}>DO</strong> undertake regular system maintenance</li><li${e}><strong${e}>DO</strong> remove old ciphers from permitted / available types</li><li${e}><strong${e}>DO</strong> protect users with CSP headers</li></ul><h3 id="organizational-and-repository-security" class="doc-heading doc-h3"${e}>Organizational &amp; Repository Security</h3><p${e}>This is something that every team should have on their radar and put some thought into. <strong${e}>DO</strong> consider who has access to your repositories, how commits are merged and how assets are published. Here are some good things to remember:</p><ul${e}><li${e}><strong${e}>DON’T</strong> put sensitive data in your source code</li><li${e}><strong${e}>DON’T</strong> ignore <code class="doc-token"${e}>yarn audit</code> or <code class="doc-token"${e}>npm audit</code> reports</li><li${e}><strong${e}>DON’T</strong> blindly rely on third-party services</li><li${e}><strong${e}>DO</strong> require a review before merging to master</li><li${e}><strong${e}>DO</strong> require 2FA for reviewers / code committers</li><li${e}><strong${e}>DO</strong> require signed commits</li><li${e}><strong${e}>DO</strong> take GitHub Security Warnings seriously</li><li${e}><strong${e}>DO</strong> undertake deep code reviews</li><li${e}><strong${e}>DO</strong> review critical third-party libraries, especially any working with real files</li><li${e}><strong${e}>DO</strong> pin versions of critical libraries</li><li${e}><strong${e}>DO</strong> commit package lock files</li><li${e}><strong${e}>DO</strong> Add <code class="doc-token"${e}>.env</code> files to your <code class="doc-token"${e}>.gitignore</code></li></ul><h2 id="final-note" class="doc-heading doc-h2"${e}>Final Note</h2><p${e}>Security is not peace of mind, it is a practical application of knowledge that requires vigilance and awareness. <strong${e}>DON’T</strong> stop being concerned about security and <strong${e}>DON’T</strong> think you are doing enough. There is always more you can undertake, there are constantly new vulnerabilities to be aware of. But the biggest security threat of them all is laziness, so put your outside shoes on, scroll back up the page and <strong${e}>DO</strong> read the `),a(d(l,{to:"/security/dos-and-donts#user-input-and-the-dangers-of-v-html"},{default:r((n,i,h,g)=>{if(i)i("OWASP link about XSS");else return[o("OWASP link about XSS")]}),_:1},c,e)),a(". We won’t tell anybody.</p>");else return[t("p",null,[t("strong",null,"DO"),o(" periodically review the security of your application, because any lapse may be putting yourself, your team, your users and even your server at risk of serious exploitation. "),t("strong",null,"DON’T"),o(" ignore this page because you think you know everything.")]),t("p",null,"We have collected some best practices for those of you new to the security theater and a few insights for security professionals new to the Vue ecosystem. We will be revising and adding to this document as we become aware of risks through our own research and the publications of the amazing security community."),t("p",null,[t("img",{src:"https://cdn.quasar.dev/img/secure-gold-hero.jpg",alt:"",title:"Quasar Audited - Gold",class:"doc-img"})]),t("h2",{id:"vue-security-risks",class:"doc-heading doc-h2",onClick:n=>s(u)("vue-security-risks")},"Vue Security Risks",8,["onClick"]),t("h3",{id:"user-input-and-the-dangers-of-v-html",class:"doc-heading doc-h3",onClick:n=>s(u)("user-input-and-the-dangers-of-v-html")},"User Input and the Dangers of v-html",8,["onClick"]),t("p",null,[o("The "),t("code",{class:"doc-token"},"v-html"),o(" directive is a wonderful way to programmatically render markup, but even the Vue docs come with "),t(l,{to:"https://vuejs.org/api/built-in-directives.html#v-html"},{default:r(()=>[o("this warning")]),_:1}),o(":")]),t("blockquote",{class:"doc-note"},[t("p",null,"“Dynamically rendering arbitrary HTML on your website can be very dangerous because it can easily lead to XSS vulnerabilities. Only use HTML interpolation on trusted content and never on user-provided content.”")]),t("p",null,[o("If you don’t know what that means, take a quick look at what OWASP has to say about "),t(l,{to:"https://owasp.org/www-community/attacks/xss/"},{default:r(()=>[o("XSS (aka cross-site scripting)")]),_:1}),o(".")]),t("p",null,[o("To be fair, this "),t("em",null,"is"),o(" good advice, but "),t("strong",null,"DON’T"),o(" be all hand-wavy. "),t("strong",null,"DO"),o(" think like an attacker who will innovate, social engineer, lie, phish and steal their way into your systems. What if a webpack loader exploit arises and changes your page in an evil way? What if someone makes a dastardly and ill-intentioned PR? What if suddenly a third party API changes and instead of plaintext starts sending the same structure but with different content? What if the systems you thought were safe turn out to actually have been backdoored? What if a junior dev makes an accidental and fundamentally threatening change to the code that isn’t reviewed properly? (Yes, idiocy is sometimes as dangerous as bad intentions!) The point is, "),t("strong",null,"DO"),o(" anticipate the unexpected by preparing for the absolute worst case scenario and hardening all of your systems.")]),t("p",null,[t("strong",null,"DO"),o(" use the "),t("code",{class:"doc-token"},"v-pre"),o(" directive if you need to take extra precaution.")]),t("h3",{id:"vue-i18n",class:"doc-heading doc-h3",onClick:n=>s(u)("vue-i18n")},"vue-i18n",8,["onClick"]),t("p",null,[o("The quasi-official internationali(s/z)ation package for Vue allows you to store html in your key’s values and "),t(l,{to:"https://kazupon.github.io/vue-i18n/guide/formatting.html#html-formatting"},{default:r(()=>[o("potentially render them")]),_:1}),o(". If users can’t modify these values, you should be ok - but make sure you trust (aka review) the translators! Our recommendation (although it is more work and will slow-down HMR) is "),t("strong",null,"DO"),o(" use "),t(l,{to:"https://kazupon.github.io/vue-i18n/guide/interpolation.html#basic-usage"},{default:r(()=>[o("template interpolation")]),_:1}),o(".")]),t("h3",{id:"eval-",class:"doc-heading doc-h3",onClick:n=>s(u)("eval-")},"eval()",8,["onClick"]),t("p",null,[o("Although you may be tempted to use "),t("code",{class:"doc-token"},"eval()"),o(", even if you know what you are doing, just "),t("strong",null,"DON’T"),o(".")]),t("p",null,[t("img",{src:"https://cdn.quasar.dev/img/dont-be-eval.png",alt:"",title:"Don't be eval()",class:"doc-img"})]),t("h2",{id:"quasar-components",class:"doc-heading doc-h2",onClick:n=>s(u)("quasar-components")},"Quasar Components",8,["onClick"]),t("p",null,[o("Some Quasar components and Plugins can be configured to allow rendering of “insecure content”. This is an opt-in feature that is performed by using "),t("code",{class:"doc-token"},"*-html"),o(" type boolean props. These components are discussed below.")]),t("h3",{id:"qselect",class:"doc-heading doc-h3",onClick:n=>s(u)("qselect")},"QSelect",8,["onClick"]),t("p",null,[o("If you are not customizing menu-related scoped-slots (i.e. "),t("code",{class:"doc-token"},"option"),o(" scoped slot), "),t("strong",null,"DO"),o(" prevent the component from rendering HTML (by not enabling it through the component props) in the labels and sublabels. Generally speaking, this is not user-supplied data. If you are customizing this slot, it is your responsibility to do sanitization yourself.")]),t("h3",{id:"qchat-and-emoji",class:"doc-heading doc-h3",onClick:n=>s(u)("qchat-and-emoji")},"QChat & Emoji",8,["onClick"]),t("p",null,[o("The "),t("code",{class:"doc-token"},"QChatMessage"),o(" component does not display content as HTML by default. But you can enable it (through the "),t("code",{class:"doc-token"},"*-html"),o(" props) in which case you should sanitize the content.")]),t("div",{class:"doc-note doc-note--tip"},[t("p",{class:"doc-note__title"},"TIP"),t("p",null,[o("There have been a number of recent exploits (especially for older Android and iOS devices) where certain emoji and non-standard UTF-8 actually triggered mobile device restarts and boot-screen loops. "),t("strong",null,"DO"),o(" consider a devland integration of markdown parsing in a plain-text type of input field and render it to HTML on the server side before you pass it to the chat recipients.")])]),t("h3",{id:"loading",class:"doc-heading doc-h3",onClick:n=>s(u)("loading")},"Loading",8,["onClick"]),t("p",null,[o("Many developers have asked that the Loading plugin be able to display HTML, so this was enabled by default, but if you are worried, "),t("strong",null,"DO"),o(" add "),t("code",{class:"doc-token"},"sanitize: true"),o(" and you removed the vector.")]),t("h3",{id:"notify",class:"doc-heading doc-h3",onClick:n=>s(u)("notify")},"Notify",8,["onClick"]),t("p",null,[o("Being able to style the Notify plugin with HTML is not enabled by default, but if you do set the boolean prop "),t("code",{class:"doc-token"},"html: true"),o(" then you are responsible for sanitizing it.")]),t("h3",{id:"dialog",class:"doc-heading doc-h3",onClick:n=>s(u)("dialog")},"Dialog",8,["onClick"]),t("p",null,[o("Being able to style the Dialog plugin with HTML is not enabled by default, but if you do set the boolean prop "),t("code",{class:"doc-token"},"html: true"),o(" then you are responsible for sanitizing the title and message.")]),t("h3",{id:"qinput",class:"doc-heading doc-h3",onClick:n=>s(u)("qinput")},"QInput",8,["onClick"]),t("p",null,"Any field that enables users to enter keystrokes, paste from the buffer or drop a file is a security risk. We won’t go into the nitty-gritty details of this, but just remember it is YOUR responsibility to maintain safety. Only you can prevent help-desk fires!"),t("h3",{id:"qeditor",class:"doc-heading doc-h3",onClick:n=>s(u)("qeditor")},"QEditor",8,["onClick"]),t("p",null,[o("This component allows the users to actually create HTML (and even paste it). If you are going to be saving this and showing it to other users, care will be needed on the server-side to validate it. In that case "),t("strong",null,"DO"),o(" strip out "),t("code",{class:"doc-token"},"<script><\/script>"),o(" and "),t("code",{class:"doc-token"},"<iframe></iframe>"),o(". You can visit the "),t(l,{to:"/vue-components/editor#example--default-editor"},{default:r(()=>[o("v-html vs. double-moustache")]),_:1}),o(" example in the docs to play around with the QEditor component and see what the two rendering methods will provide. There is NO "),t("code",{class:"doc-token"},"sanitize"),o(" tag for QEditor. Further, if you create custom buttons, it is your responsibility to make them safe. You have been warned.")]),t("h2",{id:"dealing-with-files",class:"doc-heading doc-h2",onClick:n=>s(u)("dealing-with-files")},"Dealing with Files",8,["onClick"]),t("p",null,[o("So how do you validate and sanitize a file? Well, although this is a bit out of scope for a “front-end-framework”, we know that many of you reading this will also be storing user-created files on servers. If you are just storing them (and not processing them in any way), "),t("strong",null,"DO"),o(" validate that the file is of the appropriate type by detecting the "),t(l,{to:"https://en.wikipedia.org/wiki/List_of_file_signatures"},{default:r(()=>[o("magic numbers")]),_:1}),o(". "),t("strong",null,"DO"),o(" consider using ClamAV to check files for known viral signatures.")]),t("h3",{id:"images",class:"doc-heading doc-h3",onClick:n=>s(u)("images")},"Images",8,["onClick"]),t("p",null,[o("If you are allowing users to upload images to your server, you should know that many commonly used modules merely check the file suffix. It is trivial to craft an image that only superficially appears to be an image. "),t("strong",null,"DO"),o(" verify that the file is what it claims to be by checking the magic numbers and for this consider using "),t(l,{to:"https://github.com/sindresorhus/image-type"},{default:r(()=>[o("is-image")]),_:1}),o(". While you could check the magic number in the browser "),t(l,{to:"https://medium.com/the-everyday-developer/detect-file-mime-type-using-magic-numbers-and-javascript-16bc513d4e1e"},{default:r(()=>[o("with this method")]),_:1}),o(", another approach is to let the user load an image into a canvas and then upload directly from the canvas. "),t(l,{to:"https://github.com/zhanziyang/vue-croppa"},{default:r(()=>[o("Vue-croppa")]),_:1}),o(" is great front-end tool to do this.")]),t("h3",{id:"archives",class:"doc-heading doc-h3",onClick:n=>s(u)("archives")},"Archives",8,["onClick"]),t("p",null,[o("Archive decompression attacks for directory traversal are a real security issue and are virtually impossible to detect without decompressing the file. If you can get away with NOT accepting this type of media, then do it. Otherwise, on linux "),t("strong",null,"DO"),o(" use the humble "),t("code",{class:"doc-token"},"less"),o(" / "),t("code",{class:"doc-token"},"lesspipe"),o(" and "),t("code",{class:"doc-token"},".lessfilter"),o(" for preprocessing these files with your custom workflows.")]),t("h2",{id:"passwords",class:"doc-heading doc-h2",onClick:n=>s(u)("passwords")},"Passwords",8,["onClick"]),t("p",null,[t("strong",null,"DON’T"),o(" save passwords in plaintext, in fact - "),t("strong",null,"DON’T"),o(" save them at all. "),t("strong",null,"DO"),o(" save secure hashes and compute them in memory according to a scheme using secure salt and proper algorithms. "),t("strong",null,"DO"),o(" limit the length of passwords (both minimum and maximum number of characters) BUT make the upper limit high enough that no legitimate user will ever hit. "),t("strong",null,"DO"),o(" consider a highly secure application flow for password resetting and enable the user to configure it according to their preferences. This is a process unique to every project, so we can’t tell you how to solve the problem. Nevertheless here are a few good links:")]),t("ul",null,[t("li",null,[t(l,{to:"https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Choosing_and_Using_Security_Questions_Cheat_Sheet.md"},{default:r(()=>[o("OWASP cheatsheet")]),_:1})]),t("li",null,[t(l,{to:"https://fidoalliance.org/recommended-account-recovery-practices/"},{default:r(()=>[o("FIDO Guidelines")]),_:1})])]),t("h2",{id:"cryptography",class:"doc-heading doc-h2",onClick:n=>s(u)("cryptography")},"Cryptography",8,["onClick"]),t("ul",null,[t("li",null,[t("strong",null,"DON’T"),o(" create your own cryptographic solution")]),t("li",null,[t("strong",null,"DON’T"),o(" store personal information in plaintext")]),t("li",null,[t("strong",null,"DON’T"),o(" create your own cryptographic solution "),t("em",null,"(intentionally repeating it)")]),t("li",null,[t("strong",null,"DON’T"),o(" ignore any aspect of implementation details")]),t("li",null,[t("strong",null,"DON’T"),o(" create your own cryptographic solution "),t("em",null,"(intentionally repeating it)")]),t("li",null,[t("strong",null,"DON’T"),o(" use MD5 or SHA1")]),t("li",null,[t("strong",null,"DON’T"),o(" create your "),t(l,{to:"https://about.unimelb.edu.au/newsroom/news/2019/march/researchers-find-trapdoor-in-swissvote-election-system"},{default:r(()=>[o("own cryptographic solution")]),_:1})])]),t("p",null,[o("A great place to read about this topic and properly choose an industrial strength solution is "),t(l,{to:"https://download.libsodium.org/doc/"},{default:r(()=>[o("libsodium")]),_:1})]),t("h2",{id:"distribution",class:"doc-heading doc-h2",onClick:n=>s(u)("distribution")},"Distribution",8,["onClick"]),t("div",{class:"doc-note doc-note--tip"},[t("p",{class:"doc-note__title"},"TIP"),t("p",null,[o("If someone wants to change something in your database or add some file to the server and they are not using an SSH key, "),t("strong",null,"DO"),o(" validate "),t("strong",null,"AND"),o(" sanitize the input.")])]),t("h3",{id:"web",class:"doc-heading doc-h3",onClick:n=>s(u)("web")},"Web",8,["onClick"]),t("ul",null,[t("li",null,[t("strong",null,"DON’T"),o(" use http")]),t("li",null,[t("strong",null,"DON’T"),o(" store sensitive data in JWT")]),t("li",null,[t("strong",null,"DO"),o(" Use https / wss")]),t("li",null,[t("strong",null,"DO"),o(" manually audit your certificates")]),t("li",null,[t("strong",null,"DO"),o(" validate users")]),t("li",null,[t("strong",null,"DO"),o(" remember that JWT isn’t encrypted per sé")]),t("li",null,[t("strong",null,"DO"),o(" use JWE instead of JWT and use AES256 CBC + HMAC SHA512")]),t("li",null,[t("strong",null,"DO"),o(" double-down and perform the complete OWASP web audit")])]),t("h3",{id:"cordova-capacitor",class:"doc-heading doc-h3",onClick:n=>s(u)("cordova-capacitor")},"Cordova / Capacitor",8,["onClick"]),t("ul",null,[t("li",null,[t("strong",null,"DON’T"),o(" use iframes")]),t("li",null,[t("strong",null,"DON’T"),o(" package for Android Gingerbread")]),t("li",null,[t("strong",null,"DO"),o(" sign all your builds")]),t("li",null,[t("strong",null,"DO"),o(" encrypt all data at rest")])]),t("p",null,[o("The "),t(l,{to:"https://cordova.apache.org/docs/en/latest/guide/appdev/security/"},{default:r(()=>[o("Cordova Docs Page")]),_:1}),o(" goes into detail about securing Cordova, and although it seems outdated, the information is mostly still on point.")]),t("h3",{id:"electron",class:"doc-heading doc-h3",onClick:n=>s(u)("electron")},"Electron",8,["onClick"]),t("p",null,"Electron is a very special case, because XSS and remote code injection can actually lead to complete compromise of the end-user’s (or even developer’s) device."),t("ul",null,[t("li",null,[t("strong",null,"DON’T"),o(" disable "),t("code",{class:"doc-token"},"websecurity")]),t("li",null,[t("strong",null,"DON’T"),o(" enable remote code execution")]),t("li",null,[t("strong",null,"DO"),o(" read our guidelines for enhanced "),t(l,{to:"/quasar-cli/developing-electron-apps/electron-security-concerns"},{default:r(()=>[o("Electron Safety")]),_:1}),o(".")])]),t("h3",{id:"ssr",class:"doc-heading doc-h3",onClick:n=>s(u)("ssr")},"SSR",8,["onClick"]),t("p",null,[o("When you generate your project with the SSR mode, you are provided with a minimal Express server. It is your responsibility to harden your environment to protect your server and your users. To this end, we have provided a collection of important HEADERS that you can consider and should selectively activate before your project enters the production phase (see "),t("code",{class:"doc-token"},"src-ssr/index.js"),o("). It is important to remember, that HEADERS are not bulletproof, because it is up to Browser vendors to respect them - and for example "),t(l,{to:"https://bugs.chromium.org/p/chromium/issues/detail?id=413851"},{default:r(()=>[o("Chrome will break PDF viewing")]),_:1}),o(" if your Content Security Policy uses the "),t("code",{class:"doc-token"},"sandbox"),o(" value.")]),t("ul",null,[t("li",null,[t("strong",null,"DON’T"),o(" forget to set restrictive headers")]),t("li",null,[t("strong",null,"DON’T"),o(" think that headers alone will protect you from all attacks")]),t("li",null,[t("strong",null,"DO"),o(" read about "),t(l,{to:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers"},{default:r(()=>[o("headers")]),_:1})])]),t("h2",{id:"environmental-safety",class:"doc-heading doc-h2",onClick:n=>s(u)("environmental-safety")},"Environmental Safety",8,["onClick"]),t("p",null,"Being more safe means taking many things into consideration, and the more of the following guidelines you respect, the smaller the attack footprint will be."),t("p",null,[t("img",{src:"https://cdn.quasar.dev/img/lets-encrypt.jpg",alt:"",title:"Valid SSL certificate",class:"doc-img"})]),t("h3",{id:"operational-security",class:"doc-heading doc-h3",onClick:n=>s(u)("operational-security")},"Operational Security",8,["onClick"]),t("p",null,"Audit how your development systems work:"),t("ul",null,[t("li",null,[t("strong",null,"DON’T"),o(" retain unneeded software")]),t("li",null,[t("strong",null,"DO"),o(" use an OS and distro with a smaller footprint and security features enabled (like SELinux for example)")]),t("li",null,[t("strong",null,"DO"),o(" make sure ALL software on your machine is up to date (especially NODE)")]),t("li",null,[t("strong",null,"DO"),o(" use a password manager")]),t("li",null,[t("strong",null,"DO"),o(" Use 2FA everywhere possible")])]),t("p",null,"Audit how your production environment works:"),t("ul",null,[t("li",null,[t("strong",null,"DON’T"),o(" think security through obscurity will help you when you are under attack")]),t("li",null,[t("strong",null,"DON’T"),o(" leave unneeded ports open")]),t("li",null,[t("strong",null,"DON’T"),o(" pretend containers or VM’s keep you safe by their nature")]),t("li",null,[t("strong",null,"DON’T"),o(" ever stop being paranoid")]),t("li",null,[t("strong",null,"DO"),o(" turn off password and root access to your server")]),t("li",null,[t("strong",null,"DO"),o(" use secure transfer protocols (SSH, HTTPS, SFTP, WSS)")]),t("li",null,[t("strong",null,"DO"),o(" install fail2ban and rkhunter")]),t("li",null,[t("strong",null,"DO"),o(" regularly analyze your logs")]),t("li",null,[t("strong",null,"DO"),o(" encrypt data at rest")]),t("li",null,[t("strong",null,"DO"),o(" use advanced media-type analysis")]),t("li",null,[t("strong",null,"DO"),o(" use ClamAV to detect infected files")]),t("li",null,[t("strong",null,"DO"),o(" undertake regular system maintenance")]),t("li",null,[t("strong",null,"DO"),o(" remove old ciphers from permitted / available types")]),t("li",null,[t("strong",null,"DO"),o(" protect users with CSP headers")])]),t("h3",{id:"organizational-and-repository-security",class:"doc-heading doc-h3",onClick:n=>s(u)("organizational-and-repository-security")},"Organizational & Repository Security",8,["onClick"]),t("p",null,[o("This is something that every team should have on their radar and put some thought into. "),t("strong",null,"DO"),o(" consider who has access to your repositories, how commits are merged and how assets are published. Here are some good things to remember:")]),t("ul",null,[t("li",null,[t("strong",null,"DON’T"),o(" put sensitive data in your source code")]),t("li",null,[t("strong",null,"DON’T"),o(" ignore "),t("code",{class:"doc-token"},"yarn audit"),o(" or "),t("code",{class:"doc-token"},"npm audit"),o(" reports")]),t("li",null,[t("strong",null,"DON’T"),o(" blindly rely on third-party services")]),t("li",null,[t("strong",null,"DO"),o(" require a review before merging to master")]),t("li",null,[t("strong",null,"DO"),o(" require 2FA for reviewers / code committers")]),t("li",null,[t("strong",null,"DO"),o(" require signed commits")]),t("li",null,[t("strong",null,"DO"),o(" take GitHub Security Warnings seriously")]),t("li",null,[t("strong",null,"DO"),o(" undertake deep code reviews")]),t("li",null,[t("strong",null,"DO"),o(" review critical third-party libraries, especially any working with real files")]),t("li",null,[t("strong",null,"DO"),o(" pin versions of critical libraries")]),t("li",null,[t("strong",null,"DO"),o(" commit package lock files")]),t("li",null,[t("strong",null,"DO"),o(" Add "),t("code",{class:"doc-token"},".env"),o(" files to your "),t("code",{class:"doc-token"},".gitignore")])]),t("h2",{id:"final-note",class:"doc-heading doc-h2",onClick:n=>s(u)("final-note")},"Final Note",8,["onClick"]),t("p",null,[o("Security is not peace of mind, it is a practical application of knowledge that requires vigilance and awareness. "),t("strong",null,"DON’T"),o(" stop being concerned about security and "),t("strong",null,"DON’T"),o(" think you are doing enough. There is always more you can undertake, there are constantly new vulnerabilities to be aware of. But the biggest security threat of them all is laziness, so put your outside shoes on, scroll back up the page and "),t("strong",null,"DO"),o(" read the "),t(l,{to:"/security/dos-and-donts#user-input-and-the-dangers-of-v-html"},{default:r(()=>[o("OWASP link about XSS")]),_:1}),o(". We won’t tell anybody.")])]}),_:1},w))}}},v=p.setup;p.setup=(f,m)=>{const y=D();return(y.modules||(y.modules=new Set)).add("src/pages/security/dos-and-donts.md"),v?v(f,m):void 0};const M=T(p,[["__file","dos-and-donts.md"]]);export{M as default};
