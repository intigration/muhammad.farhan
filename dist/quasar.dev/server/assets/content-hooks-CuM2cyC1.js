import{mergeProps as x,withCtx as e,createTextVNode as s,unref as i,createVNode as n,useSSRContext as C}from"vue";import{ssrRenderComponent as l}from"vue/server-renderer";import"quasar";import{D as v,a as d}from"./DocPage-DKr-0pQn.js";import{D as r}from"./DocPrerender-DPOnWPFO.js";import{C as p}from"./CopyButton-l3ndfN49.js";import{_ as q}from"../server-entry.js";import"@quasar/extras/mdi-v6";import"vue-router";import"@quasar/extras/fontawesome-v5";import"@quasar/extras/fontawesome-v6";import"@quasar/extras/mdi-v7";import"quasar/icon-set/svg-mdi-v6.mjs";const w={__name:"content-hooks",__ssrInlineRender:!0,setup(f){return(g,h,m,b)=>{h(l(v,x({title:"Content Hooks",desc:"(@quasar/app-webpack) How to communicate using your content script with your Quasar App and Background Script in Quasar Browser Extension mode.",overline:"Quasar CLI with Webpack - @quasar/app-webpack",heading:"","edit-link":"quasar-cli-webpack/developing-browser-extensions/content-hooks"},b),{default:e((Q,c,k,o)=>{if(c)c(`<p${o}><code class="doc-token"${o}>src-bex/js/content-hooks.js</code> is essentially a standard `),c(l(d,{to:"https://developer.chrome.com/extensions/content_scripts"},{default:e(($,t,u,a)=>{if(t)t("content script");else return[s("content script")]}),_:1},k,o)),c(` and you are welcome to use it as such. Content scripts are able to access the DOM of the underlying webpage and thus you are able to manipulate the content of said page.</p><p${o}>The added benefit of this file is this function:</p>`),c(l(i(r),null,{default:e(($,t,u,a)=>{if(t)t(`<pre class="doc-code"${a}><code${a}><span class="token keyword"${a}>import</span> <span class="token punctuation"${a}>{</span> bexContent <span class="token punctuation"${a}>}</span> <span class="token keyword"${a}>from</span> <span class="token string"${a}>&#39;quasar/wrappers&#39;</span>

<span class="token keyword"${a}>export</span> <span class="token keyword"${a}>default</span> <span class="token function"${a}>bexContent</span><span class="token punctuation"${a}>(</span><span class="token punctuation"${a}>(</span><span class="token parameter"${a}>bridge</span><span class="token punctuation"${a}>)</span> <span class="token operator"${a}>=&gt;</span> <span class="token punctuation"${a}>{</span>
  <span class="token comment"${a}>//</span>
<span class="token punctuation"${a}>}</span><span class="token punctuation"${a}>)</span></code></pre>`),t(l(p,null,null,u,a));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" bexContent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'quasar/wrappers'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"bexContent"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"bridge"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"//"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(p)]}),_:1},k,o)),c(`<p${o}>This function is called automatically via the Quasar BEX build chain and injects a bridge which is shared between your Quasar App instance and the background script of the BEX.</p><p${o}>For example, letâ€™s say we want to react to a button being pressed on our Quasar App and highlight some text on the underlying web page, this would be done via the content scripts like so:</p>`),c(l(i(r),{title:"Quasar App, /src"},{default:e(($,t,u,a)=>{if(t)t(`<pre class="doc-code"${a}><code${a}><span class="token function"${a}>setup</span> <span class="token punctuation"${a}>(</span><span class="token punctuation"${a}>)</span> <span class="token punctuation"${a}>{</span>
  <span class="token keyword"${a}>const</span> $q <span class="token operator"${a}>=</span> <span class="token function"${a}>useQuasar</span><span class="token punctuation"${a}>(</span><span class="token punctuation"${a}>)</span>

  <span class="token keyword"${a}>async</span> <span class="token keyword"${a}>function</span> <span class="token function"${a}>myButtonClickHandler</span> <span class="token punctuation"${a}>(</span><span class="token punctuation"${a}>)</span> <span class="token punctuation"${a}>{</span>
    <span class="token keyword"${a}>await</span> $q<span class="token punctuation"${a}>.</span>bex<span class="token punctuation"${a}>.</span><span class="token function"${a}>send</span><span class="token punctuation"${a}>(</span><span class="token string"${a}>&#39;highlight.content&#39;</span><span class="token punctuation"${a}>,</span> <span class="token punctuation"${a}>{</span> <span class="token literal-property property"${a}>selector</span><span class="token operator"${a}>:</span> <span class="token string"${a}>&#39;.some-class&#39;</span> <span class="token punctuation"${a}>}</span><span class="token punctuation"${a}>)</span>
    $q<span class="token punctuation"${a}>.</span><span class="token function"${a}>notify</span><span class="token punctuation"${a}>(</span><span class="token string"${a}>&#39;Text has been highlighted&#39;</span><span class="token punctuation"${a}>)</span>
  <span class="token punctuation"${a}>}</span>

  <span class="token keyword"${a}>return</span> <span class="token punctuation"${a}>{</span> myButtonClickHandler <span class="token punctuation"${a}>}</span>
<span class="token punctuation"${a}>}</span></code></pre>`),t(l(p,null,null,u,a));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token function"},"setup"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" $q "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useQuasar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"myButtonClickHandler"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"await"),s(" $q"),n("span",{class:"token punctuation"},"."),s("bex"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'highlight.content'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"selector"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'.some-class'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
    $q`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"notify"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Text has been highlighted'"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(" myButtonClickHandler "),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}")])]),n(p)]}),_:1},k,o)),c(l(i(r),{title:"src-bex/css/content-css.css"},{default:e(($,t,u,a)=>{if(t)t(`<pre class="doc-code language-css"${a}><code${a}><span class="token selector"${a}>.bex-highlight</span> <span class="token punctuation"${a}>{</span>
    <span class="token property"${a}>background-color</span><span class="token punctuation"${a}>:</span> red<span class="token punctuation"${a}>;</span>
<span class="token punctuation"${a}>}</span></code></pre>`),t(l(p,null,null,u,a));else return[n("pre",{class:"doc-code language-css"},[n("code",null,[n("span",{class:"token selector"},".bex-highlight"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},"background-color"),n("span",{class:"token punctuation"},":"),s(" red"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}")])]),n(p)]}),_:1},k,o)),c(l(i(r),{title:"/src-bex/js/content-hooks.js:"},{default:e(($,t,u,a)=>{if(t)t(`<pre class="doc-code"${a}><code${a}><span class="token keyword"${a}>import</span> <span class="token punctuation"${a}>{</span> bexContent <span class="token punctuation"${a}>}</span> <span class="token keyword"${a}>from</span> <span class="token string"${a}>&#39;quasar/wrappers&#39;</span>

<span class="token keyword"${a}>export</span> <span class="token keyword"${a}>default</span> <span class="token function"${a}>bexContent</span><span class="token punctuation"${a}>(</span><span class="token punctuation"${a}>(</span><span class="token parameter"${a}>bridge</span><span class="token punctuation"${a}>)</span> <span class="token operator"${a}>=&gt;</span> <span class="token punctuation"${a}>{</span>
  bridge<span class="token punctuation"${a}>.</span><span class="token function"${a}>on</span><span class="token punctuation"${a}>(</span><span class="token string"${a}>&#39;highlight.content&#39;</span><span class="token punctuation"${a}>,</span> <span class="token punctuation"${a}>(</span><span class="token parameter"${a}><span class="token punctuation"${a}>{</span> data<span class="token punctuation"${a}>,</span> respond <span class="token punctuation"${a}>}</span></span><span class="token punctuation"${a}>)</span> <span class="token operator"${a}>=&gt;</span> <span class="token punctuation"${a}>{</span>
    <span class="token keyword"${a}>const</span> el <span class="token operator"${a}>=</span> document<span class="token punctuation"${a}>.</span><span class="token function"${a}>querySelector</span><span class="token punctuation"${a}>(</span>data<span class="token punctuation"${a}>.</span>selector<span class="token punctuation"${a}>)</span>
    <span class="token keyword"${a}>if</span> <span class="token punctuation"${a}>(</span>el <span class="token operator"${a}>!==</span> <span class="token keyword"${a}>null</span><span class="token punctuation"${a}>)</span> <span class="token punctuation"${a}>{</span>
      el<span class="token punctuation"${a}>.</span>classList<span class="token punctuation"${a}>.</span><span class="token function"${a}>add</span><span class="token punctuation"${a}>(</span><span class="token string"${a}>&#39;bex-highlight&#39;</span><span class="token punctuation"${a}>)</span>
    <span class="token punctuation"${a}>}</span>

    <span class="token comment"${a}>// Let&#39;s resolve the \`send()\` call&#39;s promise, this way we can await it on the other side then display a notification.</span>
    <span class="token function"${a}>respond</span><span class="token punctuation"${a}>(</span><span class="token punctuation"${a}>)</span>
  <span class="token punctuation"${a}>}</span><span class="token punctuation"${a}>)</span>
<span class="token punctuation"${a}>}</span><span class="token punctuation"${a}>)</span></code></pre>`),t(l(p,null,null,u,a));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" bexContent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'quasar/wrappers'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"bexContent"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"bridge"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  bridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'highlight.content'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token punctuation"},"{"),s(" data"),n("span",{class:"token punctuation"},","),s(" respond "),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" el "),n("span",{class:"token operator"},"="),s(" document"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"querySelector"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},"."),s("selector"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("el "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      el`),n("span",{class:"token punctuation"},"."),s("classList"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'bex-highlight'"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Let's resolve the `send()` call's promise, this way we can await it on the other side then display a notification."),s(`
    `),n("span",{class:"token function"},"respond"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(p)]}),_:1},k,o)),c(`<p${o}>Content scripts live in an `),c(l(d,{to:"https://developer.chrome.com/extensions/content_scripts#isolated_world"},{default:e(($,t,u,a)=>{if(t)t("isolated world");else return[s("isolated world")]}),_:1},k,o)),c(`, allowing a content script to makes changes to its JavaScript environment without conflicting with the page or additional content scripts.</p><p${o}>Isolated worlds do not allow for content scripts, the extension, and the web page to access any variables or functions created by the others. This also gives content scripts the ability to enable functionality that should not be accessible to the web page.</p><p${o}>This is where <code class="doc-token"${o}>dom-hooks</code> come in.</p>`);else return[n("p",null,[n("code",{class:"doc-token"},"src-bex/js/content-hooks.js"),s(" is essentially a standard "),n(d,{to:"https://developer.chrome.com/extensions/content_scripts"},{default:e(()=>[s("content script")]),_:1}),s(" and you are welcome to use it as such. Content scripts are able to access the DOM of the underlying webpage and thus you are able to manipulate the content of said page.")]),n("p",null,"The added benefit of this file is this function:"),n(i(r),null,{default:e(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" bexContent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'quasar/wrappers'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"bexContent"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"bridge"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"//"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(p)]),_:1}),n("p",null,"This function is called automatically via the Quasar BEX build chain and injects a bridge which is shared between your Quasar App instance and the background script of the BEX."),n("p",null,"For example, letâ€™s say we want to react to a button being pressed on our Quasar App and highlight some text on the underlying web page, this would be done via the content scripts like so:"),n(i(r),{title:"Quasar App, /src"},{default:e(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token function"},"setup"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" $q "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useQuasar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"myButtonClickHandler"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"await"),s(" $q"),n("span",{class:"token punctuation"},"."),s("bex"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'highlight.content'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"selector"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'.some-class'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
    $q`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"notify"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Text has been highlighted'"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(" myButtonClickHandler "),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}")])]),n(p)]),_:1}),n(i(r),{title:"src-bex/css/content-css.css"},{default:e(()=>[n("pre",{class:"doc-code language-css"},[n("code",null,[n("span",{class:"token selector"},".bex-highlight"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},"background-color"),n("span",{class:"token punctuation"},":"),s(" red"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}")])]),n(p)]),_:1}),n(i(r),{title:"/src-bex/js/content-hooks.js:"},{default:e(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" bexContent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'quasar/wrappers'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"bexContent"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"bridge"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  bridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'highlight.content'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token punctuation"},"{"),s(" data"),n("span",{class:"token punctuation"},","),s(" respond "),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" el "),n("span",{class:"token operator"},"="),s(" document"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"querySelector"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},"."),s("selector"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("el "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      el`),n("span",{class:"token punctuation"},"."),s("classList"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'bex-highlight'"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Let's resolve the `send()` call's promise, this way we can await it on the other side then display a notification."),s(`
    `),n("span",{class:"token function"},"respond"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(p)]),_:1}),n("p",null,[s("Content scripts live in an "),n(d,{to:"https://developer.chrome.com/extensions/content_scripts#isolated_world"},{default:e(()=>[s("isolated world")]),_:1}),s(", allowing a content script to makes changes to its JavaScript environment without conflicting with the page or additional content scripts.")]),n("p",null,"Isolated worlds do not allow for content scripts, the extension, and the web page to access any variables or functions created by the others. This also gives content scripts the ability to enable functionality that should not be accessible to the web page."),n("p",null,[s("This is where "),n("code",{class:"doc-token"},"dom-hooks"),s(" come in.")])]}),_:1},m))}}},y=w.setup;w.setup=(f,g)=>{const h=C();return(h.modules||(h.modules=new Set)).add("src/pages/quasar-cli-webpack/developing-browser-extensions/content-hooks.md"),y?y(f,g):void 0};const J=q(w,[["__file","content-hooks.md"]]);export{J as default};
