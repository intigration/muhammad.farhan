import{mergeProps as A,withCtx as p,unref as c,createVNode as n,createTextVNode as a,useSSRContext as x}from"vue";import{ssrRenderComponent as r}from"vue/server-renderer";import{c as $}from"./page-utils-C-QWsEHe.js";import{D as b}from"./DocPage-DKr-0pQn.js";import{D as i}from"./DocPrerender-DPOnWPFO.js";import{C as o}from"./CopyButton-l3ndfN49.js";import{_ as j}from"../server-entry.js";import"quasar";import"@quasar/extras/mdi-v6";import"vue-router";import"@quasar/extras/fontawesome-v5";import"@quasar/extras/fontawesome-v6";import"@quasar/extras/mdi-v7";import"quasar/icon-set/svg-mdi-v6.mjs";const f={__name:"electron-preload-script",__ssrInlineRender:!0,setup(y){const m=[{id:"how-to-use-it",title:"2. How to use it"},{id:"security-considerations",title:"3. Security considerations"},{id:"custom-path-to-the-preload-script",title:"4. Custom path to the preload script"}];return(h,g,P,v)=>{g(r(b,A({title:"Electron Preload Script",desc:"(@quasar/app-vite) How to handle Electron Node Integration with an Electron Preload script with Quasar CLI.",overline:"Quasar CLI with Vite - @quasar/app-vite",heading:"","edit-link":"quasar-cli-vite/developing-electron-apps/electron-preload-script",toc:m},v),{default:p((C,l,d,t)=>{if(l)l(`<p${t}>For security reasons, the renderer thread (your UI code from <code class="doc-token"${t}>/src</code>) does not have access to the Node.js stuff. However, you can run Node.js code and bridge it to the renderer thread through an Electron Preload script located at <code class="doc-token"${t}>/src-electron/electron-preload.[js|ts]</code>. Use <code class="doc-token"${t}>contextBridge</code> (from the <code class="doc-token"${t}>electron</code> package) to expose the stuff that you need for your UI.</p><p${t}>Since the preload script runs from Node.js, be careful what you do with it and what you expose to the renderer thread!</p><h2 id="how-to-use-it" class="doc-heading doc-h2"${t}>How to use it</h2><p${t}>In <code class="doc-token"${t}>/src-electron/</code> folder, there is a file named <code class="doc-token"${t}>electron-preload.js</code>. Fill it with your preload code.</p><p${t}>Make sure that your <code class="doc-token"${t}>/src-electron/electron-main.[js|ts]</code> has the following (near the “webPreferences” section):</p>`),l(r(c(i),{title:"/src-electron/electron-main"},{default:p((k,e,u,s)=>{if(e)e(`<pre class="doc-code"${s}><code${s}><span class="token comment"${s}>// Add this at the top:</span>
<span class="token keyword"${s}>import</span> path <span class="token keyword"${s}>from</span> <span class="token string"${s}>&#39;path&#39;</span>

<span class="token comment"${s}>// ...</span>

<span class="token keyword"${s}>function</span> <span class="token function"${s}>createWindow</span> <span class="token punctuation"${s}>(</span><span class="token punctuation"${s}>)</span> <span class="token punctuation"${s}>{</span>
  <span class="token comment"${s}>// ...</span>
  mainWindow <span class="token operator"${s}>=</span> <span class="token keyword"${s}>new</span> <span class="token class-name"${s}>BrowserWindow</span><span class="token punctuation"${s}>(</span><span class="token punctuation"${s}>{</span>
    <span class="token comment"${s}>// ...</span>
    <span class="token literal-property property"${s}>webPreferences</span><span class="token operator"${s}>:</span> <span class="token punctuation"${s}>{</span>
      <span class="token comment"${s}>// HERE IS THE MAGIC:</span>
      <span class="token literal-property property"${s}>preload</span><span class="token operator"${s}>:</span> path<span class="token punctuation"${s}>.</span><span class="token function"${s}>resolve</span><span class="token punctuation"${s}>(</span>__dirname<span class="token punctuation"${s}>,</span> process<span class="token punctuation"${s}>.</span>env<span class="token punctuation"${s}>.</span><span class="token constant"${s}>QUASAR_ELECTRON_PRELOAD</span><span class="token punctuation"${s}>)</span>
    <span class="token punctuation"${s}>}</span>
  <span class="token punctuation"${s}>}</span><span class="token punctuation"${s}>)</span></code></pre>`),e(r(o,null,null,u,s));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// Add this at the top:"),a(`
`),n("span",{class:"token keyword"},"import"),a(" path "),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},"'path'"),a(`

`),n("span",{class:"token comment"},"// ..."),a(`

`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"createWindow"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// ..."),a(`
  mainWindow `),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"BrowserWindow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// ..."),a(`
    `),n("span",{class:"token literal-property property"},"webPreferences"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token comment"},"// HERE IS THE MAGIC:"),a(`
      `),n("span",{class:"token literal-property property"},"preload"),n("span",{class:"token operator"},":"),a(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),a("__dirname"),n("span",{class:"token punctuation"},","),a(" process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"QUASAR_ELECTRON_PRELOAD"),n("span",{class:"token punctuation"},")"),a(`
    `),n("span",{class:"token punctuation"},"}"),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]}),_:1},d,t)),l(`<p${t}>Example of <code class="doc-token"${t}>/src-electron/electron-preload.[js|ts]</code> content:</p>`),l(r(c(i),null,{default:p((k,e,u,s)=>{if(e)e(`<pre class="doc-code"${s}><code${s}><span class="token comment"${s}>// example which injects window.myAPI.doAThing() into the renderer</span>
<span class="token comment"${s}>// thread (/src/*)</span>

<span class="token keyword"${s}>const</span> <span class="token punctuation"${s}>{</span> contextBridge <span class="token punctuation"${s}>}</span> <span class="token operator"${s}>=</span> <span class="token function"${s}>require</span><span class="token punctuation"${s}>(</span><span class="token string"${s}>&#39;electron&#39;</span><span class="token punctuation"${s}>)</span>

contextBridge<span class="token punctuation"${s}>.</span><span class="token function"${s}>exposeInMainWorld</span><span class="token punctuation"${s}>(</span><span class="token string"${s}>&#39;myAPI&#39;</span><span class="token punctuation"${s}>,</span> <span class="token punctuation"${s}>{</span>
  <span class="token function-variable function"${s}>doAThing</span><span class="token operator"${s}>:</span> <span class="token punctuation"${s}>(</span><span class="token punctuation"${s}>)</span> <span class="token operator"${s}>=&gt;</span> <span class="token punctuation"${s}>{</span><span class="token punctuation"${s}>}</span>
<span class="token punctuation"${s}>}</span><span class="token punctuation"${s}>)</span></code></pre>`),e(r(o,null,null,u,s));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// example which injects window.myAPI.doAThing() into the renderer"),a(`
`),n("span",{class:"token comment"},"// thread (/src/*)"),a(`

`),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" contextBridge "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'electron'"),n("span",{class:"token punctuation"},")"),a(`

contextBridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exposeInMainWorld"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token function-variable function"},"doAThing"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]}),_:1},d,t)),l(`<div class="doc-note doc-note--warning"${t}><p class="doc-note__title"${t}>WARNING</p><ol${t}><li${t}>Be aware that this file runs in a Node.js context.</li><li${t}>If you import anything from node_modules, then make sure that the package is specified in /package.json &gt; “dependencies” and NOT in “devDependencies”.</li></ol></div><h2 id="security-considerations" class="doc-heading doc-h2"${t}>Security considerations</h2><p${t}>Just by using <code class="doc-token"${t}>contextBridge</code> does not automatically mean that everything you do is safe. For instance the code below is unsafe:</p>`),l(r(c(i),null,{default:p((k,e,u,s)=>{if(e)e(`<pre class="doc-code"${s}><code${s}><span class="token comment"${s}>// BAD code; DON&#39;T!!</span>
contextBridge<span class="token punctuation"${s}>.</span><span class="token function"${s}>exposeInMainWorld</span><span class="token punctuation"${s}>(</span><span class="token string"${s}>&#39;myAPI&#39;</span><span class="token punctuation"${s}>,</span> <span class="token punctuation"${s}>{</span>
  <span class="token literal-property property"${s}>send</span><span class="token operator"${s}>:</span> ipcRenderer<span class="token punctuation"${s}>.</span>send
<span class="token punctuation"${s}>}</span><span class="token punctuation"${s}>)</span></code></pre>`),e(r(o,null,null,u,s));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// BAD code; DON'T!!"),a(`
contextBridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exposeInMainWorld"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token literal-property property"},"send"),n("span",{class:"token operator"},":"),a(" ipcRenderer"),n("span",{class:"token punctuation"},"."),a(`send
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]}),_:1},d,t)),l(`<p${t}>It directly exposes a powerful API without any kind of argument filtering. This would allow any website to send arbitrary IPC messages which you do not want to be possible. The correct way to expose IPC-based APIs would instead be to provide one method per IPC message.</p>`),l(r(c(i),null,{default:p((k,e,u,s)=>{if(e)e(`<pre class="doc-code"${s}><code${s}><span class="token comment"${s}>// Good code</span>
contextBridge<span class="token punctuation"${s}>.</span><span class="token function"${s}>exposeInMainWorld</span><span class="token punctuation"${s}>(</span><span class="token string"${s}>&#39;myAPI&#39;</span><span class="token punctuation"${s}>,</span> <span class="token punctuation"${s}>{</span>
  <span class="token function-variable function"${s}>loadPreferences</span><span class="token operator"${s}>:</span> <span class="token punctuation"${s}>(</span><span class="token punctuation"${s}>)</span> <span class="token operator"${s}>=&gt;</span> ipcRenderer<span class="token punctuation"${s}>.</span><span class="token function"${s}>invoke</span><span class="token punctuation"${s}>(</span><span class="token string"${s}>&#39;myAPI:load-prefs&#39;</span><span class="token punctuation"${s}>)</span>
<span class="token punctuation"${s}>}</span><span class="token punctuation"${s}>)</span></code></pre>`),e(r(o,null,null,u,s));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// Good code"),a(`
contextBridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exposeInMainWorld"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token function-variable function"},"loadPreferences"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(" ipcRenderer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"invoke"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI:load-prefs'"),n("span",{class:"token punctuation"},")"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]}),_:1},d,t)),l(`<p${t}>Now, <code class="doc-token"${t}>loadPreferences</code> is available globally in your javascript code (ie: <code class="doc-token"${t}>window.myAPI.loadPreferences</code>).</p><div class="doc-note doc-note--warning"${t}><p class="doc-note__title"${t}>WARNING</p><p${t}>Make sure to pick names which do not colide with existing <code class="doc-token"${t}>Window</code> keys.</p></div><p${t}>Using the above code with an <code class="doc-token"${t}>invoke</code> to <code class="doc-token"${t}>load-prefs</code> in the main thread would have code like this:</p>`),l(r(c(i),null,{default:p((k,e,u,s)=>{if(e)e(`<pre class="doc-code"${s}><code${s}>ipcMain<span class="token punctuation"${s}>.</span><span class="token function"${s}>handle</span><span class="token punctuation"${s}>(</span><span class="token string"${s}>&#39;myAPI:load-prefs&#39;</span><span class="token punctuation"${s}>,</span> <span class="token punctuation"${s}>(</span><span class="token punctuation"${s}>)</span> <span class="token operator"${s}>=&gt;</span> <span class="token punctuation"${s}>{</span>
  <span class="token keyword"${s}>return</span> <span class="token punctuation"${s}>{</span>
    <span class="token comment"${s}>// object that contains preferences</span>
  <span class="token punctuation"${s}>}</span>
<span class="token punctuation"${s}>}</span><span class="token punctuation"${s}>)</span></code></pre>`),e(r(o,null,null,u,s));else return[n("pre",{class:"doc-code"},[n("code",null,[a("ipcMain"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"handle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI:load-prefs'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// object that contains preferences"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]}),_:1},d,t)),l(`<h2 id="custom-path-to-the-preload-script" class="doc-heading doc-h2"${t}>Custom path to the preload script</h2><p${t}>Should you wish to change the location of the preload script (and/or even the main thread file) then edit the <code class="doc-token"${t}>/quasar.config</code> file:</p>`),l(r(c(i),null,{default:p((k,e,u,s)=>{if(e)e(`<pre class="doc-code"${s}><code${s}><span class="token comment"${s}>// should you wish to change default files</span>
<span class="token literal-property property"${s}>sourceFiles</span><span class="token operator"${s}>:</span> <span class="token punctuation"${s}>{</span>
  <span class="token literal-property property"${s}>electronMain</span><span class="token operator"${s}>:</span> <span class="token string"${s}>&#39;src-electron/electron-main.js&#39;</span><span class="token punctuation"${s}>,</span>
  <span class="token literal-property property"${s}>electronPreload</span><span class="token operator"${s}>:</span> <span class="token string"${s}>&#39;src-electron/electron-preload.js&#39;</span>
<span class="token punctuation"${s}>}</span></code></pre>`),e(r(o,null,null,u,s));else return[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// should you wish to change default files"),a(`
`),n("span",{class:"token literal-property property"},"sourceFiles"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token literal-property property"},"electronMain"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"'src-electron/electron-main.js'"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token literal-property property"},"electronPreload"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"'src-electron/electron-preload.js'"),a(`
`),n("span",{class:"token punctuation"},"}")])]),n(o)]}),_:1},d,t));else return[n("p",null,[a("For security reasons, the renderer thread (your UI code from "),n("code",{class:"doc-token"},"/src"),a(") does not have access to the Node.js stuff. However, you can run Node.js code and bridge it to the renderer thread through an Electron Preload script located at "),n("code",{class:"doc-token"},"/src-electron/electron-preload.[js|ts]"),a(". Use "),n("code",{class:"doc-token"},"contextBridge"),a(" (from the "),n("code",{class:"doc-token"},"electron"),a(" package) to expose the stuff that you need for your UI.")]),n("p",null,"Since the preload script runs from Node.js, be careful what you do with it and what you expose to the renderer thread!"),n("h2",{id:"how-to-use-it",class:"doc-heading doc-h2",onClick:k=>c($)("how-to-use-it")},"How to use it",8,["onClick"]),n("p",null,[a("In "),n("code",{class:"doc-token"},"/src-electron/"),a(" folder, there is a file named "),n("code",{class:"doc-token"},"electron-preload.js"),a(". Fill it with your preload code.")]),n("p",null,[a("Make sure that your "),n("code",{class:"doc-token"},"/src-electron/electron-main.[js|ts]"),a(" has the following (near the “webPreferences” section):")]),n(c(i),{title:"/src-electron/electron-main"},{default:p(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// Add this at the top:"),a(`
`),n("span",{class:"token keyword"},"import"),a(" path "),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},"'path'"),a(`

`),n("span",{class:"token comment"},"// ..."),a(`

`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"createWindow"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// ..."),a(`
  mainWindow `),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"BrowserWindow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// ..."),a(`
    `),n("span",{class:"token literal-property property"},"webPreferences"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token comment"},"// HERE IS THE MAGIC:"),a(`
      `),n("span",{class:"token literal-property property"},"preload"),n("span",{class:"token operator"},":"),a(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),a("__dirname"),n("span",{class:"token punctuation"},","),a(" process"),n("span",{class:"token punctuation"},"."),a("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"QUASAR_ELECTRON_PRELOAD"),n("span",{class:"token punctuation"},")"),a(`
    `),n("span",{class:"token punctuation"},"}"),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]),_:1}),n("p",null,[a("Example of "),n("code",{class:"doc-token"},"/src-electron/electron-preload.[js|ts]"),a(" content:")]),n(c(i),null,{default:p(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// example which injects window.myAPI.doAThing() into the renderer"),a(`
`),n("span",{class:"token comment"},"// thread (/src/*)"),a(`

`),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" contextBridge "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'electron'"),n("span",{class:"token punctuation"},")"),a(`

contextBridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exposeInMainWorld"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token function-variable function"},"doAThing"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]),_:1}),n("div",{class:"doc-note doc-note--warning"},[n("p",{class:"doc-note__title"},"WARNING"),n("ol",null,[n("li",null,"Be aware that this file runs in a Node.js context."),n("li",null,"If you import anything from node_modules, then make sure that the package is specified in /package.json > “dependencies” and NOT in “devDependencies”.")])]),n("h2",{id:"security-considerations",class:"doc-heading doc-h2",onClick:k=>c($)("security-considerations")},"Security considerations",8,["onClick"]),n("p",null,[a("Just by using "),n("code",{class:"doc-token"},"contextBridge"),a(" does not automatically mean that everything you do is safe. For instance the code below is unsafe:")]),n(c(i),null,{default:p(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// BAD code; DON'T!!"),a(`
contextBridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exposeInMainWorld"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token literal-property property"},"send"),n("span",{class:"token operator"},":"),a(" ipcRenderer"),n("span",{class:"token punctuation"},"."),a(`send
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]),_:1}),n("p",null,"It directly exposes a powerful API without any kind of argument filtering. This would allow any website to send arbitrary IPC messages which you do not want to be possible. The correct way to expose IPC-based APIs would instead be to provide one method per IPC message."),n(c(i),null,{default:p(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// Good code"),a(`
contextBridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exposeInMainWorld"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token function-variable function"},"loadPreferences"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(" ipcRenderer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"invoke"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI:load-prefs'"),n("span",{class:"token punctuation"},")"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]),_:1}),n("p",null,[a("Now, "),n("code",{class:"doc-token"},"loadPreferences"),a(" is available globally in your javascript code (ie: "),n("code",{class:"doc-token"},"window.myAPI.loadPreferences"),a(").")]),n("div",{class:"doc-note doc-note--warning"},[n("p",{class:"doc-note__title"},"WARNING"),n("p",null,[a("Make sure to pick names which do not colide with existing "),n("code",{class:"doc-token"},"Window"),a(" keys.")])]),n("p",null,[a("Using the above code with an "),n("code",{class:"doc-token"},"invoke"),a(" to "),n("code",{class:"doc-token"},"load-prefs"),a(" in the main thread would have code like this:")]),n(c(i),null,{default:p(()=>[n("pre",{class:"doc-code"},[n("code",null,[a("ipcMain"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"handle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'myAPI:load-prefs'"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// object that contains preferences"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])]),n(o)]),_:1}),n("h2",{id:"custom-path-to-the-preload-script",class:"doc-heading doc-h2",onClick:k=>c($)("custom-path-to-the-preload-script")},"Custom path to the preload script",8,["onClick"]),n("p",null,[a("Should you wish to change the location of the preload script (and/or even the main thread file) then edit the "),n("code",{class:"doc-token"},"/quasar.config"),a(" file:")]),n(c(i),null,{default:p(()=>[n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// should you wish to change default files"),a(`
`),n("span",{class:"token literal-property property"},"sourceFiles"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token literal-property property"},"electronMain"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"'src-electron/electron-main.js'"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token literal-property property"},"electronPreload"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"'src-electron/electron-preload.js'"),a(`
`),n("span",{class:"token punctuation"},"}")])]),n(o)]),_:1})]}),_:1},P))}}},w=f.setup;f.setup=(y,m)=>{const h=x();return(h.modules||(h.modules=new Set)).add("src/pages/quasar-cli-vite/developing-electron-apps/electron-preload-script.md"),w?w(y,m):void 0};const F=j(f,[["__file","electron-preload-script.md"]]);export{F as default};
