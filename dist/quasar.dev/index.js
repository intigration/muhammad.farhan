var T=Object.defineProperty;var F=(e,r)=>()=>(e&&(r=e(e=0)),r);var D=(e,r)=>{for(var t in r)T(e,t,{get:r[t],enumerable:!0})};var S={};D(S,{default:()=>Q});import{ssrMiddleware as J}from"quasar/wrappers/index.mjs";var Q,$=F(()=>{Q=J(({app:e,resolve:r,render:t,serve:o})=>{e.get(r.urlPath("*"),(a,s)=>{s.setHeader("Content-Type","text/html"),t({req:a,res:s}).then(n=>{s.send(n)}).catch(n=>{n.url?n.code?s.redirect(n.code,n.url):s.redirect(n.url):n.code===404?s.status(404).send("404 | Page Not Found"):s.status(500).send("500 | Internal Server Error")})})})});import{join as l,basename as z}from"node:path";import{readFileSync as K}from"node:fs";import{fileURLToPath as W}from"node:url";import{renderToString as X}from"vue/server-renderer";import Y from"./render-template.js";import Z from"./server/server-entry.js";import P from"express";import M from"compression";import{ssrClose as O,ssrCreate as x,ssrListen as L,ssrServeStaticContent as U,ssrRenderPreloadTag as G}from"quasar/wrappers/index.mjs";var R=x(()=>{let e=P();return e.disable("x-powered-by"),e.use(M()),e}),y=L(async({app:e,devHttpsApp:r,port:t,isReady:o})=>(await o(),(r||e).listen(t,()=>{console.log("Server listening at port "+t)}))),ce=O(({listenResult:e})=>e.close()),H=1e3*60*60*24*30,E=U((e,r)=>P.static(e,{maxAge:H,...r})),N=/\.js$/,_=/\.css$/,q=/\.woff$/,A=/\.woff2$/,I=/\.gif$/,V=/\.jpe?g$/,B=/\.png$/,f=G(e=>N.test(e)===!0?`<link rel="modulepreload" href="${e}" crossorigin>`:_.test(e)===!0?`<link rel="stylesheet" href="${e}" crossorigin>`:q.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff" crossorigin>`:A.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff2" crossorigin>`:I.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/gif" crossorigin>`:V.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/jpeg" crossorigin>`:B.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/png" crossorigin>`:"");function m(e){return Promise.all([Promise.resolve().then(()=>($(),S))]).then(async r=>{let t=r.map(o=>o.default);for(let o=0;o<t.length;o++)try{await t[o](e)}catch(a){console.error("[Quasar SSR] middleware error:",a);return}})}var C=process.env.PORT||3111,ee=/\/\//g,i="/",h=i==="/"?e=>e||"/":e=>e?(i+e).replace(ee,"/"):i,c=W(new URL(".",import.meta.url)),j=l(c,"client"),g=JSON.parse(K(l(c,"./quasar.manifest.json"),"utf-8"));function k(){return l(j,...arguments)}function re(e,r){let t="",o=new Set;return e.forEach(a=>{let s=g[a];s!==void 0&&s.forEach(n=>{if(o.has(n)===!0)return;o.add(n);let w=z(n);if(g[w]!==void 0)for(let u of g[w])o.has(u)===!1&&(t+=f(u,r),o.add(u));t+=f(n,r)})}),t}async function te(e){let r=[];Object.assign(e,{_meta:{},onRendered:t=>{r.push(t)}});try{let t=await Z(e),o=await X(t,e);return r.forEach(a=>{a()}),typeof e.rendered=="function"&&e.rendered(),e._meta.runtimePageContent=o,e._meta.endingHeadTags+=re(e.modules,{ssrContext:e}),Y(e)}catch(t){throw t}}var v=(e,r={})=>E(k(e),r),d={port:C,resolve:{urlPath:h,root(){return l(c,...arguments)},public:k},publicPath:i,folders:{root:c,public:j},render:e=>te(e),serve:{static:v}},p=R(d);d.app=p;p.use(h("/service-worker.js"),v("service-worker.js",{maxAge:0}));p.use(h("/"),v("."));var b=()=>m(d),oe=(e,r,t)=>b().then(()=>p(e,r,t)),Re=y({isReady:b,ssrHandler:oe,...d});export{Re as default};
