import{b as c,d as u,w as t,e as a,f as o,h as n,i as s}from"./vendor.js";import{D as l}from"./DocPage.js";import{D as e}from"./DocPrerender.js";import{C as p}from"./CopyButton.js";import{_ as r}from"./index.js";const i=n("p",null,[n("code",{class:"doc-token"},"src-bex/dom.js"),s(" is a file that is injected into the underlying web page automatically by Quasar but as with all the other hook files has access to the bridge via:")],-1),k=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" bexDom "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'quasar/wrappers'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"bexDom"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"bridge"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"//"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])],-1),d=n("p",null,"If you ever find yourself needing to inject a JS file into your underlying web page, you can use the dom script instead as it means you can maintain that chain of communication in the BEX.",-1),y=n("p",null,"For example, lets say you wanted to write a BEX that detects whether or not a Quasar app is running on a page, the only way to do this is by running some javascript in the context of the web page.",-1),m=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// We create a new folder + file:"),s(`
`),n("span",{class:"token comment"},"// src-bex/dom/detect-quasar.js"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"initQuasar"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("bridge"),n("span",{class:"token punctuation"},","),s(" quasarInstance")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  bridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'quasar.detect'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"version"),n("span",{class:"token operator"},":"),s(" quasarInstance"),n("span",{class:"token punctuation"},"."),s("version"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"dark"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"isActive"),n("span",{class:"token operator"},":"),s(" quasarInstance"),n("span",{class:"token punctuation"},"."),s("dark "),n("span",{class:"token operator"},"?"),s(" quasarInstance"),n("span",{class:"token punctuation"},"."),s("dark"),n("span",{class:"token punctuation"},"."),s("isActive "),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token number"},"0"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"umd"),n("span",{class:"token operator"},":"),s(" quasarInstance"),n("span",{class:"token punctuation"},"."),s("umd"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"iconSet"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(" quasarInstance"),n("span",{class:"token punctuation"},"."),s("iconSet"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"__installed"),n("span",{class:"token operator"},":"),s(" quasarInstance"),n("span",{class:"token punctuation"},"."),s("iconSet"),n("span",{class:"token punctuation"},"."),s(`__installed
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"lang"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"rtl"),n("span",{class:"token operator"},":"),s(" quasarInstance"),n("span",{class:"token punctuation"},"."),s("lang"),n("span",{class:"token punctuation"},"."),s(`rtl
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  window`),n("span",{class:"token punctuation"},"."),s("__QUASAR_DEVTOOLS__ "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"Quasar"),n("span",{class:"token operator"},":"),s(` quasarInstance
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"detectQuasar"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"bridge"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("window"),n("span",{class:"token punctuation"},"."),s("Quasar"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"// UMD"),s(`
    `),n("span",{class:"token function"},"initQuasar"),n("span",{class:"token punctuation"},"("),s("bridge"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"version"),n("span",{class:"token operator"},":"),s(" window"),n("span",{class:"token punctuation"},"."),s("Quasar"),n("span",{class:"token punctuation"},"."),s("version"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"dark"),n("span",{class:"token operator"},":"),s(" window"),n("span",{class:"token punctuation"},"."),s("Quasar"),n("span",{class:"token punctuation"},"."),s("Dark"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token operator"},"..."),s("window"),n("span",{class:"token punctuation"},"."),s("Quasar"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"umd"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"// CLI"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" isVue3 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),s(`
    `),n("span",{class:"token function"},"setTimeout"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"const"),s(" all "),n("span",{class:"token operator"},"="),s(" document"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"querySelectorAll"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'*'"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token keyword"},"let"),s(` el
      `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"let"),s(" i "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(" all"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},";"),s(" i"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("all"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),s("__vue__ "),n("span",{class:"token operator"},"||"),s(" all"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),s("__vue_app__"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
          el `),n("span",{class:"token operator"},"="),s(" all"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),s(`
          isVue3 `),n("span",{class:"token operator"},"="),s(" all"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),s("__vue_app__ "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token number"},"0"),s(`
          `),n("span",{class:"token keyword"},"break"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`

      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("el"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"const"),s(" Vue "),n("span",{class:"token operator"},"="),s(" isVue3 "),n("span",{class:"token operator"},"?"),s(" el"),n("span",{class:"token punctuation"},"."),s("__vue_app__ "),n("span",{class:"token operator"},":"),s(" Object"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getPrototypeOf"),n("span",{class:"token punctuation"},"("),s("el"),n("span",{class:"token punctuation"},"."),s("__vue__"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s(`constructor

        `),n("span",{class:"token keyword"},"const"),s(" quasar "),n("span",{class:"token operator"},"="),s(" isVue3 "),n("span",{class:"token operator"},"?"),s(" Vue"),n("span",{class:"token punctuation"},"."),s("config"),n("span",{class:"token punctuation"},"."),s("globalProperties"),n("span",{class:"token punctuation"},"."),s("$q "),n("span",{class:"token operator"},":"),s(),n("span",{class:"token class-name"},"Vue"),n("span",{class:"token punctuation"},"."),s("prototype"),n("span",{class:"token punctuation"},"."),s(`$q
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("quasar"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token function"},"initQuasar"),n("span",{class:"token punctuation"},"("),s("bridge"),n("span",{class:"token punctuation"},","),s(" quasar"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"100"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}")])],-1),_=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" bexDom "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'quasar/wrappers'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" detectQuasar "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./dom/detect-quasar'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"bexDom"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"bridge"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"detectQuasar"),n("span",{class:"token punctuation"},"("),s("bridge"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])],-1),w=n("p",null,"The bridge above will notify all listeners in the BEX that Quasar has been found and along with that send the instance information.",-1),f={__name:"dom-script",setup(h){return(b,g)=>(c(),u(l,{title:"DOM Script",desc:"(@quasar/app-vite) How to communicate to the underlying web page using dom hooks in Quasar Browser Extension mode.",overline:"Quasar CLI with Vite - @quasar/app-vite",heading:"","edit-link":"quasar-cli-vite/developing-browser-extensions/dom-script"},{default:t(()=>[i,a(o(e),null,{default:t(()=>[k,a(p)]),_:1}),d,y,a(o(e),null,{default:t(()=>[m,a(p)]),_:1}),a(o(e),{title:"/src-bex/dom.js:"},{default:t(()=>[_,a(p)]),_:1}),w]),_:1}))}},I=r(f,[["__file","dom-script.md"]]);export{I as default};
