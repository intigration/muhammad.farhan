import{b as p,d as u,w as t,h as n,i as s,e as a,f as o}from"./vendor.js";import{D as i,a as l}from"./DocPage.js";import{D as e}from"./DocPrerender.js";import{C as c}from"./CopyButton.js";import{_ as r}from"./index.js";const k=n("code",{class:"doc-token"},"src-bex/js/background-hooks.js",-1),d=n("strong",null,"all",-1),h=n("p",null,"The added benefit of this file is this function:",-1),f=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" bexBackground "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'quasar/wrappers'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"bexBackground"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("bridge"),n("span",{class:"token punctuation"},","),s(" activeConnections")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"//"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])],-1),b=n("p",null,"This function is called automatically via the Quasar BEX build chain and injects a bridge which is shared between all parts of the BEX meaning you can communicate with any part of your BEX.",-1),m=n("p",null,[s("The "),n("code",{class:"doc-token"},"bridge"),s(" param is the bridge to use for communication. The "),n("code",{class:"doc-token"},"activeConnections"),s(" param provides a map of all the BEX connections registered via the bridge i.e All the Web Page, Options, Popup and Dev Tools BEX’s used by the same Quasar App.")],-1),g=n("p",null,"For example, let’s say we want to listen for a new tab being opened in the web browser and then react to it in our Quasar App. First, we’d need to listen for the new tab being opened and emit a new event to tell the Quasar App this has happened:",-1),w=n("pre",{class:"doc-code"},[n("code",null,[s("chrome"),n("span",{class:"token punctuation"},"."),s("tabs"),n("span",{class:"token punctuation"},"."),s("onUpdated"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addListener"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("tabId"),n("span",{class:"token punctuation"},","),s(" changeInfo"),n("span",{class:"token punctuation"},","),s(" tab")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  bridge`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'bex.tab.opened'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"url"),n("span",{class:"token operator"},":"),s(" tab"),n("span",{class:"token punctuation"},"."),s("url "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])],-1),_=n("p",null,"Then in our Quasar App, we’d listen for this in one of our component lifecycle hooks, like so:",-1),y=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" useQuasar "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'quasar'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" onBeforeUnmount "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"setup"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" $q "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useQuasar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`

    `),n("span",{class:"token comment"},"// Our function which receives the URL sent by the background script."),s(`
    `),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"doOnTabOpened"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"url"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'New Browser Tab Openend: '"),n("span",{class:"token punctuation"},","),s(" url"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Add our listener"),s(`
    $q`),n("span",{class:"token punctuation"},"."),s("bex"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'bex.tab.opened'"),n("span",{class:"token punctuation"},","),s(" doOnTabOpened"),n("span",{class:"token punctuation"},")"),s(`

    `),n("span",{class:"token comment"},"// Don't forget to clean it up"),s(`
    `),n("span",{class:"token function"},"onBeforeUnmount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      $q`),n("span",{class:"token punctuation"},"."),s("bex"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"off"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'bex.tab.opened'"),n("span",{class:"token punctuation"},","),s(" doOnTabOpened"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}")])],-1),x=n("p",null,"There are wide variety of events available to the browser extension background script - Google is your friend if you’re trying to do something in this area.",-1),B=n("p",null,[s("What if you want to modify the underlying web page content in some way? That’s where we’d use "),n("code",{class:"doc-token"},"content-hooks.js"),s(". Let’s look at that in the next section.")],-1),v={__name:"background-hooks",setup(T){return(O,q)=>(p(),u(i,{title:"Background Hooks",desc:"(@quasar/app-webpack) How to communicate using your background script with other parts of your Browser Extension (BEX).",overline:"Quasar CLI with Webpack - @quasar/app-webpack",heading:"","edit-link":"quasar-cli-webpack/developing-browser-extensions/background-hooks"},{default:t(()=>[n("p",null,[k,s(" is essentially a standard "),a(l,{to:"https://developer.chrome.com/extensions/background_pages"},{default:t(()=>[s("background script")]),_:1}),s(" and you are welcome to use it as such. Background scripts can communicate with "),d,s(" Web Pages, Dev Tools, Options and Popups running under your BEX.")]),h,a(o(e),null,{default:t(()=>[f,a(c)]),_:1}),b,m,g,a(o(e),null,{default:t(()=>[w,a(c)]),_:1}),_,a(o(e),null,{default:t(()=>[y,a(c)]),_:1}),x,B]),_:1}))}},C=r(v,[["__file","background-hooks.md"]]);export{C as default};
