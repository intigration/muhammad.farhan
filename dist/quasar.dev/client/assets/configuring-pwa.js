import{b as h,d as f,w as e,h as n,f as o,e as s,i as t,j as g}from"./vendor.js";import{c}from"./_examples_frameless-electron-window.js";import{D as m,a as u}from"./DocPage.js";import{D as w}from"./DocTree.js";import{D as l}from"./DocPrerender.js";import{C as p}from"./CopyButton.js";import{_ as y}from"./index.js";const _=n("p",null,[t("Adding PWA mode to a Quasar project means a new folder will be created: "),n("code",{class:"doc-token"},"/src-pwa"),t(", which contains PWA specific files:")],-1),v=n("p",null,"You can freely edit these files. Notice a few things:",-1),b=n("li",null,[n("code",{class:"doc-token"},"register-service-worker.[js|ts]"),t(" is automatically imported into your app (like any other /src file). It registers the service worker (created by Workbox or your custom one, depending on workbox plugin mode – quasar.config file > pwa > workboxPluginMode) and you can listen for Service Worker’s events. You can use ES6 code.")],-1),x=n("li",null,[n("code",{class:"doc-token"},"custom-service-worker.[js|ts]"),t(" will be your service worker file ONLY if workbox plugin mode is set to “injectManifest” (quasar.config file > pwa > workboxMode: ‘injectManifest’). Otherwise, Quasar and Workbox will create a service-worker file for you.")],-1),W={class:"doc-note doc-note--tip"},q=n("p",{class:"doc-note__title"},"TIP",-1),j=n("code",{class:"doc-token"},"register-service-worker.[js|ts]",-1),M=n("p",null,"This is the place where you can configure Workbox behavior and also tweak your manifest.json.",-1),C=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"pwa"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token literal-property property"},"workboxMode"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'generateSW'"),n("span",{class:"token punctuation"},","),t(),n("span",{class:"token comment"},"// or 'injectManifest'"),t(`
  `),n("span",{class:"token literal-property property"},"injectPwaMetaTags"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),t(),n("span",{class:"token comment"},"// boolean | (() => string)"),t(`
  `),n("span",{class:"token literal-property property"},"swFilename"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'sw.js'"),n("span",{class:"token punctuation"},","),t(),n("span",{class:"token comment"},"// should be .js (as it's the distribution file, not the input file)"),t(`
  `),n("span",{class:"token literal-property property"},"manifestFilename"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'manifest.json'"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token literal-property property"},"useCredentialsForManifestTag"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token function"},"extendGenerateSWOptions"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token function"},"extendInjectManifestOptions"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token function"},"extendManifestJson"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"json"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token function"},"extendPWACustomSWConf"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"esbuildConf"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}"),t(`

`),n("span",{class:"token literal-property property"},"sourceFiles"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token literal-property property"},"pwaRegisterServiceWorker"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'src-pwa/register-service-worker'"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token literal-property property"},"pwaServiceWorker"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'src-pwa/custom-service-worker'"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token literal-property property"},"pwaManifestFile"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'src-pwa/manifest.json'"),n("span",{class:"token punctuation"},","),t(`
`),n("span",{class:"token punctuation"},"}")])],-1),P=n("p",null,"Should you want to tamper with the Vite config for UI in /src:",-1),S=n("pre",{class:"doc-code"},[n("code",null,[t("module"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function-variable function"},"exports"),t(),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"function"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token keyword"},"return"),t(),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token literal-property property"},"build"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
      `),n("span",{class:"token function"},"extendViteConf"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"viteConf"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
        `),n("span",{class:"token keyword"},"if"),t(),n("span",{class:"token punctuation"},"("),t("ctx"),n("span",{class:"token punctuation"},"."),t("mode"),n("span",{class:"token punctuation"},"."),t("pwa"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
          `),n("span",{class:"token comment"},"// do something with ViteConf"),t(`
        `),n("span",{class:"token punctuation"},"}"),t(`
      `),n("span",{class:"token punctuation"},"}"),t(`
    `),n("span",{class:"token punctuation"},"}"),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}")])],-1),A=n("p",null,[t("Quasar CLI adds (dynamically) some PWA oriented meta tags into your index.html. Should you wish to customize the tags, first disable this behavior in the "),n("code",{class:"doc-token"},"/quasar.config"),t(" file:")],-1),T=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"pwa"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token literal-property property"},"injectPwaMetaTags"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token boolean"},"false"),t(`
`),n("span",{class:"token punctuation"},"}")])],-1),I=n("p",null,[t("Then, edit your "),n("code",{class:"doc-token"},"/index.html"),t(" file. The following are the actual meta tags that Quasar CLI injects dynamically:")],-1),L=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("head")]),n("span",{class:"token punctuation"},">")]),t(`

  <% if (ctx.mode.pwa) { %>
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("meta")]),t(),n("span",{class:"token attr-name"},"name"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("theme-color"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"content"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("<%= pwaManifest.theme_color %>"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("link")]),t(),n("span",{class:"token attr-name"},"rel"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("mask-icon"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"href"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("icons/safari-pinned-tab.svg"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"color"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("<%= pwaManifest.theme_color %>"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("meta")]),t(),n("span",{class:"token attr-name"},"name"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("apple-mobile-web-app-capable"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"content"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("yes"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("meta")]),t(),n("span",{class:"token attr-name"},"name"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("apple-mobile-web-app-status-bar-style"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"content"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("default"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("meta")]),t(),n("span",{class:"token attr-name"},"name"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("msapplication-TileImage"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"content"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("icons/ms-icon-144x144.png"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("meta")]),t(),n("span",{class:"token attr-name"},"name"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("msapplication-TileColor"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"content"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("#000000"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("meta")]),t(),n("span",{class:"token attr-name"},"name"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("apple-mobile-web-app-title"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"content"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("<%= pwaManifest.name %>"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("link")]),t(),n("span",{class:"token attr-name"},"rel"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("apple-touch-icon"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"href"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("icons/apple-icon-120x120.png"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("link")]),t(),n("span",{class:"token attr-name"},"rel"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("apple-touch-icon"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"sizes"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("152x152"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"href"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("icons/apple-icon-152x152.png"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("link")]),t(),n("span",{class:"token attr-name"},"rel"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("apple-touch-icon"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"sizes"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("167x167"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"href"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("icons/apple-icon-167x167.png"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("link")]),t(),n("span",{class:"token attr-name"},"rel"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("apple-touch-icon"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"sizes"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("180x180"),n("span",{class:"token punctuation"},'"')]),t(),n("span",{class:"token attr-name"},"href"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),t("icons/apple-icon-180x180.png"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),t(`
  <% } %>

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),t("head")]),n("span",{class:"token punctuation"},">")])])],-1),N=n("p",null,[t("Notice that you have access to your PWA manifest through "),n("code",{class:"doc-token"},"pwaManifest"),t(" above.")],-1),O=n("p",null,"Alternatively, you can assign a function to injectPwaMetaTags like below:",-1),R=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"pwa"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token function"},"injectPwaMetaTags"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token keyword"},"return"),t(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},'<meta name="apple-mobile-web-app-capable" content="yes">'),n("span",{class:"token template-punctuation string"},"`")]),t(`
      `),n("span",{class:"token operator"},"+"),t(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},'<meta name="apple-mobile-web-app-status-bar-style" content="default">'),n("span",{class:"token template-punctuation string"},"`")]),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}")])],-1),Y=n("p",null,[t("There are two Workbox operating modes: "),n("strong",null,"generateSW"),t(" (default) and "),n("strong",null,"injectManifest"),t(".")],-1),F=n("p",null,[t("Setting the mode that you want to use is done through the "),n("code",{class:"doc-token"},"/quasar.config"),t(" file:")],-1),$=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"pwa"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token literal-property property"},"workboxMode"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'generateSW'"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token function"},"extendGenerateSWOptions"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token comment"},"// configure workbox on generateSW"),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}"),t(`

`),n("span",{class:"token literal-property property"},"pwa"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token literal-property property"},"workboxMode"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'injectManifest'"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token function"},"extendInjectManifestOptions"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token comment"},"// configure workbox on injectManifest"),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}")])],-1),D=n("p",null,"When to use generateSW:",-1),B=n("ul",null,[n("li",null,"You want to precache files."),n("li",null,"You have simple runtime configuration needs (e.g. the configuration allows you to define routes and strategies).")],-1),Q=n("p",null,"When NOT to use generateSW:",-1),V=n("ul",null,[n("li",null,"You want to use other Service Worker features (i.e. Web Push)."),n("li",null,"You want to import additional scripts or add additional logic.")],-1),H={class:"doc-note doc-note--tip"},U=n("p",{class:"doc-note__title"},"TIP",-1),z=n("p",null,"When to use InjectManifest:",-1),G=n("ul",null,[n("li",null,"You want more control over your service worker."),n("li",null,"You want to precache files."),n("li",null,"You have more complex needs in terms of routing."),n("li",null,"You would like to use your service worker with other APIs (e.g. Web Push).")],-1),E=n("p",null,"When NOT to use InjectManifest:",-1),J=n("ul",null,[n("li",null,"You want the easiest path to adding a service worker to your site.")],-1),K={class:"doc-note doc-note--tip"},X=n("p",{class:"doc-note__title"},"TIPS",-1),Z=n("li",null,[t("If you want to use this mode, you will have to write the service worker ("),n("code",{class:"doc-token"},"/src-pwa/custom-service-worker.[js|ts]"),t(") file by yourself.")],-1),nn=n("p",null,[t("The following snippet is the default code for a custom service worker ("),n("code",{class:"doc-token"},"/src-pwa/custom-service-worker.[js|ts]"),t(") which mimics the behavior of "),n("code",{class:"doc-token"},"generateSW"),t(" mode:")],-1),tn=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},`/*
 * This file (which will be your service worker)
 * is picked up by the build system ONLY if
 * quasar.config file > pwa > workboxMode is set to "injectManifest"
 */`),t(`

`),n("span",{class:"token keyword"},"import"),t(),n("span",{class:"token punctuation"},"{"),t(" clientsClaim "),n("span",{class:"token punctuation"},"}"),t(),n("span",{class:"token keyword"},"from"),t(),n("span",{class:"token string"},"'workbox-core'"),t(`
`),n("span",{class:"token keyword"},"import"),t(),n("span",{class:"token punctuation"},"{"),t(" precacheAndRoute"),n("span",{class:"token punctuation"},","),t(" cleanupOutdatedCaches"),n("span",{class:"token punctuation"},","),t(" createHandlerBoundToURL "),n("span",{class:"token punctuation"},"}"),t(),n("span",{class:"token keyword"},"from"),t(),n("span",{class:"token string"},"'workbox-precaching'"),t(`
`),n("span",{class:"token keyword"},"import"),t(),n("span",{class:"token punctuation"},"{"),t(" registerRoute"),n("span",{class:"token punctuation"},","),t(" NavigationRoute "),n("span",{class:"token punctuation"},"}"),t(),n("span",{class:"token keyword"},"from"),t(),n("span",{class:"token string"},"'workbox-routing'"),t(`

self`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"skipWaiting"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),t(`
`),n("span",{class:"token function"},"clientsClaim"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),t(`

`),n("span",{class:"token comment"},"// Use with precache injection"),t(`
`),n("span",{class:"token function"},"precacheAndRoute"),n("span",{class:"token punctuation"},"("),t("self"),n("span",{class:"token punctuation"},"."),t("__WB_MANIFEST"),n("span",{class:"token punctuation"},")"),t(`

`),n("span",{class:"token function"},"cleanupOutdatedCaches"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),t(`

`),n("span",{class:"token comment"},"// Non-SSR fallback to index.html"),t(`
`),n("span",{class:"token comment"},"// Production SSR fallback to offline.html (except for dev)"),t(`
`),n("span",{class:"token keyword"},"if"),t(),n("span",{class:"token punctuation"},"("),t("process"),n("span",{class:"token punctuation"},"."),t("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"MODE"),t(),n("span",{class:"token operator"},"!=="),t(),n("span",{class:"token string"},"'ssr'"),t(),n("span",{class:"token operator"},"||"),t(" process"),n("span",{class:"token punctuation"},"."),t("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"PROD"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token function"},"registerRoute"),n("span",{class:"token punctuation"},"("),t(`
    `),n("span",{class:"token keyword"},"new"),t(),n("span",{class:"token class-name"},"NavigationRoute"),n("span",{class:"token punctuation"},"("),t(`
      `),n("span",{class:"token function"},"createHandlerBoundToURL"),n("span",{class:"token punctuation"},"("),t("process"),n("span",{class:"token punctuation"},"."),t("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"PWA_FALLBACK_HTML"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),t(`
      `),n("span",{class:"token punctuation"},"{"),t(),n("span",{class:"token literal-property property"},"denylist"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"["),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"sw\\.js$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),t(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"workbox-(.)*\\.js$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},"]"),t(),n("span",{class:"token punctuation"},"}"),t(`
    `),n("span",{class:"token punctuation"},")"),t(`
  `),n("span",{class:"token punctuation"},")"),t(`
`),n("span",{class:"token punctuation"},"}")])],-1),sn=n("p",null,[t("The Manifest file is located at "),n("code",{class:"doc-token"},"/src-pwa/manifest.json"),t(". You can freely edit it.")],-1),an=n("p",null,[t("Should you need to change it dynamically at build time, you can do so by editing the "),n("code",{class:"doc-token"},"/quasar.config"),t(" file:")],-1),en=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"pwa"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token function"},"extendManifestJson"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"json"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token comment"},"// tamper with the json"),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}")])],-1),on=n("div",{class:"doc-note doc-note--warning"},[n("p",{class:"doc-note__title"},"WARNING"),n("p",null,[t("Note that you don’t need to edit your index.html file (generated from "),n("code",{class:"doc-token"},"/index.html"),t(") to link to the manifest file. Quasar CLI takes care of embedding the right things for you.")])],-1),cn=n("div",{class:"doc-note doc-note--tip"},[n("p",{class:"doc-note__title"},"TIP"),n("p",null,[t("If your PWA is behind basic auth or requires an Authorization header, set quasar.config file > pwa > useCredentialsForManifestTag to "),n("code",{class:"doc-token"},"true"),t(" to include "),n("code",{class:"doc-token"},'crossorigin="use-credentials"'),t(" on the manifest.json meta tag.")])],-1),ln={class:"doc-note doc-note--danger"},pn=n("p",{class:"doc-note__title"},"WARNING",-1),un=n("p",null,[t("For those who don’t want to manually reload the page when the service worker is updated "),n("strong",null,"and are using the default generateSW workbox mode"),t(", Quasar CLI has configured Workbox to activate it at once. Should you need to disable this behavior:")],-1),rn=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"pwa"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token function"},"extendGenerateSWOptions"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"cfg"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
    cfg`),n("span",{class:"token punctuation"},"."),t("skipWaiting "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token boolean"},"false"),t(`
    cfg`),n("span",{class:"token punctuation"},"."),t("clientsClaim "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token boolean"},"false"),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}")])],-1),kn=n("p",null,[t("Due to how Rollup builds the assets (through Vite), when you change any of your script source files (.js) this will also change the hash part of (almost) ALL .js files (ex: "),n("code",{class:"doc-token"},"454d87bd"),t(" in "),n("code",{class:"doc-token"},"assets/index.454d87bd.js"),t("). The revision number of all assets will get changed in your service worker file and this means that when PWA updates it will re-download ALL your assets again. What a waste of bandwidth and such a longer time to get the PWA updated!")],-1),dn=n("p",null,[t("By default, Vite builds all filenames "),n("strong",null,"with the hash part"),t(". However, should you want your filenames to NOT contain the hash part, you need to edit the "),n("code",{class:"doc-token"},"/quasar.config"),t(" file:")],-1),hn=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"build"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token literal-property property"},"useFilenameHashes"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token boolean"},"false"),t(),n("span",{class:"token comment"},"// true by default"),t(`
`),n("span",{class:"token punctuation"},"}")])],-1),fn=n("p",null,"When filename hashes are disabled it would be wise to also make sure that your webserver has cache set accordingly (as low as possible) to ensure consistent resource delivery to your clients that can’t use the PWA functionality.",-1),gn={__name:"configuring-pwa",setup(mn){const r=[{name:"The quasar.config file",category:"Quasar CLI (with Vite)",path:"/quasar-cli-vite/quasar-config-file"}],k=[{id:"service-worker",title:"2. Service Worker"},{id:"quasar-config-file",title:"3. quasar.config file"},{id:"adding-your-own-meta-tags-in-index-html",title:"4. Adding your own meta tags in index.html"},{id:"picking-workbox-mode",title:"5. Picking Workbox mode"},{id:"generatesw",title:"5.1. generateSW",sub:!0},{id:"injectmanifest",title:"5.2. InjectManifest",sub:!0},{id:"configuring-manifest-file",title:"6. Configuring Manifest File"},{id:"pwa-checklist",title:"7. PWA Checklist"},{id:"reload-and-update-automatically",title:"8. Reload & Update Automatically"},{id:"filename-hashes-quirk",title:"9. Filename hashes quirk"}],d={tree:{l:"src-pwa",c:[{l:"register-service-worker.js",e:"(or .ts) UI code *managing* service worker"},{l:"manifest.json",e:"Your PWA manifest file"},{l:"custom-service-worker.js",e:"(or .ts) Optional custom service worker file (injectManifest mode ONLY)"}]}};return(wn,a)=>(h(),f(m,{title:"Configuring PWA",desc:"(@quasar/app-vite) How to manage your Progressive Web Apps with Quasar CLI.",overline:"Quasar CLI with Vite - @quasar/app-vite",heading:"","edit-link":"quasar-cli-vite/developing-pwa/configuring-pwa",toc:k,related:r},{default:e(()=>[n("h2",{id:"service-worker",class:"doc-heading doc-h2",onClick:a[0]||(a[0]=i=>o(c)("service-worker"))},"Service Worker"),_,s(w,{def:d.tree},null,8,["def"]),v,n("ol",null,[b,x,n("li",null,[t("It makes sense to run "),s(u,{to:"https://developers.google.com/web/tools/lighthouse/"},{default:e(()=>[t("Lighthouse")]),_:1}),t(" tests on production builds only.")])]),n("div",W,[q,n("p",null,[t("Read more on "),j,t(" and how to interact with the Service Worker on "),s(u,{to:"/quasar-cli-vite/developing-pwa/handling-service-worker"},{default:e(()=>[t("Handling Service Worker")]),_:1}),t(" documentation page.")])]),n("h2",{id:"quasar-config-file",class:"doc-heading doc-h2",onClick:a[1]||(a[1]=i=>o(c)("quasar-config-file"))},"quasar.config file"),M,s(o(l),null,{default:e(()=>[C,s(p)]),_:1}),P,s(o(l),{title:"/quasar.config file"},{default:e(()=>[S,s(p)]),_:1}),n("p",null,[t("More information: "),s(u,{to:"https://developers.google.com/web/tools/workbox"},{default:e(()=>[t("Workbox")]),_:1}),t(".")]),n("h2",{id:"adding-your-own-meta-tags-in-index-html",class:"doc-heading doc-h2",onClick:a[2]||(a[2]=i=>o(c)("adding-your-own-meta-tags-in-index-html"))},"Adding your own meta tags in index.html"),A,s(o(l),{title:"/quasar.config file"},{default:e(()=>[T,s(p)]),_:1}),I,s(o(l),null,{default:e(()=>[L,s(p)]),_:1}),N,O,s(o(l),{title:"/quasar.config file"},{default:e(()=>[R,s(p)]),_:1}),n("h2",{id:"picking-workbox-mode",class:"doc-heading doc-h2",onClick:a[3]||(a[3]=i=>o(c)("picking-workbox-mode"))},"Picking Workbox mode"),Y,F,s(o(l),{title:"/quasar.config file"},{default:e(()=>[$,s(p)]),_:1}),n("h3",{id:"generatesw",class:"doc-heading doc-h3",onClick:a[4]||(a[4]=i=>o(c)("generatesw"))},"generateSW"),D,B,Q,V,n("div",H,[U,n("p",null,[t("Please check the available workboxOptions for this mode on "),s(u,{to:"https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-build#.generateSW"},{default:e(()=>[t("Workbox website")]),_:1}),t(".")])]),n("h3",{id:"injectmanifest",class:"doc-heading doc-h3",onClick:a[5]||(a[5]=i=>o(c)("injectmanifest"))},"InjectManifest"),z,G,E,J,n("div",K,[X,n("ul",null,[Z,n("li",null,[t("Please check the available workboxOptions for this mode on "),s(u,{to:"https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-build#.injectManifest"},{default:e(()=>[t("Workbox website")]),_:1}),t(".")])])]),nn,s(o(l),null,{default:e(()=>[tn,s(p)]),_:1}),n("h2",{id:"configuring-manifest-file",class:"doc-heading doc-h2",onClick:a[6]||(a[6]=i=>o(c)("configuring-manifest-file"))},"Configuring Manifest File"),sn,an,s(o(l),{title:"/quasar.config file"},{default:e(()=>[en,s(p)]),_:1}),n("p",null,[t("Please read about the "),s(u,{to:"https://developer.mozilla.org/en-US/docs/Web/Manifest"},{default:e(()=>[t("manifest config")]),_:1}),t(" before diving in.")]),on,cn,n("h2",{id:"pwa-checklist",class:"doc-heading doc-h2",onClick:a[7]||(a[7]=i=>o(c)("pwa-checklist"))},"PWA Checklist"),n("p",null,[t("More info: "),s(u,{to:"https://web.dev/pwa-checklist/"},{default:e(()=>[t("PWA Checklist")]),_:1})]),n("div",ln,[pn,n("p",null,[t("Do not run "),s(u,{to:"https://developers.google.com/web/tools/lighthouse/"},{default:e(()=>[t("Lighthouse")]),_:1}),t(" on your development build because at this stage the code is intentionally not optimized and contains embedded source maps (among many other things). See the "),s(u,{to:"/quasar-cli-vite/testing-and-auditing"},{default:e(()=>[t("Testing and Auditing")]),_:1}),t(" section of these docs for more information.")])]),n("h2",{id:"reload-and-update-automatically",class:"doc-heading doc-h2",onClick:a[8]||(a[8]=i=>o(c)("reload-and-update-automatically"))},"Reload & Update Automatically"),un,s(o(l),{title:"/quasar.config file"},{default:e(()=>[rn,s(p)]),_:1}),n("h2",{id:"filename-hashes-quirk",class:"doc-heading doc-h2",onClick:a[9]||(a[9]=i=>o(c)("filename-hashes-quirk"))},[t("Filename hashes quirk "),s(g,{label:"@quasar/app-vite v1.1+"})]),kn,dn,s(o(l),{title:"/quasar.config file"},{default:e(()=>[hn,s(p)]),_:1}),fn]),_:1}))}},jn=y(gn,[["__file","configuring-pwa.md"]]);export{jn as default};
