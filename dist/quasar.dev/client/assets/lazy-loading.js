import{c as l}from"./_examples_frameless-electron-window.js";import{D as k,a as r}from"./DocPage.js";import{D as p}from"./DocPrerender.js";import{C as c}from"./CopyButton.js";import{_ as d}from"./index.js";import{b as m,d as h,w as e,h as n,f as a,i as t,e as s}from"./vendor.js";const y=n("p",null,"When your website/app is small, you can load all layouts/pages/components into the initial bundle and serve everything at startup. But when your code gets complex and has many layouts/pages/components, it won’t be optimal to do this as it will massively impact loading time. Fortunately, there is a way to solve this.",-1),g=n("p",null,"We’ll cover how you can lazy load / code split parts of your app so that they are automatically requested only on demand. This is done through dynamic imports. Let’s start with an example and then convert it so that we use lazy loading – we’ll focus this example on loading a page, but the same principle can be applied to load anything (assets, JSONs, …).",-1),f=n("p",null,"It’s normal to use the Vue Router calling static components as below.",-1),w={class:"doc-note doc-note--warning"},_=n("p",{class:"doc-note__title"},"WARNING",-1),v=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),t(" SomePage "),n("span",{class:"token keyword"},"from"),t(),n("span",{class:"token string"},"'pages/SomePage'"),t(`

`),n("span",{class:"token keyword"},"const"),t(" routes "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token punctuation"},"["),t(`
  `),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'/some-page'"),n("span",{class:"token punctuation"},","),t(`
    `),n("span",{class:"token literal-property property"},"component"),n("span",{class:"token operator"},":"),t(` SomePage
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"]")])],-1),z=n("p",null,"Now let’s change this and make the page be loaded on demand only, using dynamic imports:",-1),b=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"const"),t(" routes "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token punctuation"},"["),t(`
  `),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token string"},"'/some-page'"),n("span",{class:"token punctuation"},","),t(`
    `),n("span",{class:"token function-variable function"},"component"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token operator"},"=>"),t(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'pages/SomePage'"),n("span",{class:"token punctuation"},")"),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"]")])],-1),C=n("p",null,[t("Easy, right? What this does is that it creates a separate chunk for "),n("code",{class:"doc-token"},"/src/pages/SomePage.vue"),t(" which is then loaded only when it is needed. In this case, when a user visits the ‘/some-page’ route.")],-1),L=n("p",null,"Normally you would import a component and then register it to the Page, Layout or Component.",-1),x=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("script")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[t(`
`),n("span",{class:"token keyword"},"import"),t(" SomeComponent "),n("span",{class:"token keyword"},"from"),t(),n("span",{class:"token string"},"'components/SomeComponent'"),t(`

`),n("span",{class:"token keyword"},"export"),t(),n("span",{class:"token keyword"},"default"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token literal-property property"},"components"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
    SomeComponent`),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}"),t(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),t("script")]),n("span",{class:"token punctuation"},">")])])],-1),S=n("p",null,"Now let’s change this and make the component be loaded on demand only, using dynamic imports:",-1),V=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),t("script")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[t(`
`),n("span",{class:"token keyword"},"import"),t(),n("span",{class:"token punctuation"},"{"),t(" defineAsyncComponent "),n("span",{class:"token punctuation"},"}"),t(),n("span",{class:"token keyword"},"from"),t(),n("span",{class:"token string"},"'vue'"),t(`
`),n("span",{class:"token keyword"},"export"),t(),n("span",{class:"token keyword"},"default"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token literal-property property"},"components"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token literal-property property"},"SomeComponent"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token function"},"defineAsyncComponent"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token operator"},"=>"),t(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'components/SomeComponent'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}"),t(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),t("script")]),n("span",{class:"token punctuation"},">")])])],-1),I=n("p",null,[t("As you noticed above, we’re using dynamic imports ("),n("code",{class:"doc-token"},"import('..resource..')"),t(") instead of regular imports ("),n("code",{class:"doc-token"},"import Resource from './path/to/resource'"),t("). Dynamic imports are essentially returning a Promise that you can use:")],-1),N=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./categories.json'"),n("span",{class:"token punctuation"},")"),t(`
  `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"categories"),t(),n("span",{class:"token operator"},"=>"),t(),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token comment"},"// hey, we have lazy loaded the file"),t(`
    `),n("span",{class:"token comment"},'// and we have its content in "categories"'),t(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),t(`
  `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token operator"},"=>"),t(),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token comment"},"// oops, something went wrong..."),t(`
    `),n("span",{class:"token comment"},"// couldn't load the resource"),t(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])],-1),P=n("p",null,"One advantage of using dynamic imports as opposed to regular imports is that the import path can be determined at runtime:",-1),j=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'pages/'"),t(),n("span",{class:"token operator"},"+"),t(" pageName "),n("span",{class:"token operator"},"+"),t(),n("span",{class:"token string"},"'/'"),t(),n("span",{class:"token operator"},"+"),t(" idWithExtension"),n("span",{class:"token punctuation"},")")])],-1),D=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"const"),t(" importList "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"."),t("meta"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"glob"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./pages/*.vue'"),n("span",{class:"token punctuation"},")"),t(`
`),n("span",{class:"token keyword"},"const"),t(" startIndex "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token string"},"'/pages/'"),n("span",{class:"token punctuation"},"."),t(`length

`),n("span",{class:"token keyword"},"const"),t(" routes "),n("span",{class:"token operator"},"="),t(" Object"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"keys"),n("span",{class:"token punctuation"},"("),t("importList"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"key"),t(),n("span",{class:"token operator"},"=>"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token keyword"},"return"),t(),n("span",{class:"token punctuation"},"{"),t(`
    `),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),t(" key"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"substring"),n("span",{class:"token punctuation"},"("),t("startIndex"),n("span",{class:"token punctuation"},","),t(" key"),n("span",{class:"token punctuation"},"."),t("length "),n("span",{class:"token operator"},"-"),t(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),t(`
    `),n("span",{class:"token literal-property property"},"component"),n("span",{class:"token operator"},":"),t(" importList"),n("span",{class:"token punctuation"},"["),t(" key "),n("span",{class:"token punctuation"},"]"),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")])],-1),B={__name:"lazy-loading",setup($){const u=[{id:"lazy-load-router-pages",title:"2. Lazy-load router pages"},{id:"lazy-load-components",title:"3. Lazy-load components"},{id:"lazy-load-on-the-fly",title:"4. Lazy-load on the fly"},{id:"importing-with-vite",title:"5. Importing with Vite"},{id:"dynamic-import-statements",title:"5.1. Dynamic import statements",sub:!0},{id:"other-import-options",title:"5.2. Other import options",sub:!0}];return(O,o)=>(m(),h(k,{title:"Lazy Loading / Code Splitting",desc:"(@quasar/app-vite) How to create async chunks in a Quasar CLI with Vite app.",overline:"Quasar CLI with Vite - @quasar/app-vite",heading:"","edit-link":"quasar-cli-vite/lazy-loading",toc:u},{default:e(()=>[y,g,n("h2",{id:"lazy-load-router-pages",class:"doc-heading doc-h2",onClick:o[0]||(o[0]=i=>a(l)("lazy-load-router-pages"))},"Lazy-load router pages"),f,n("div",w,[_,n("p",null,[t("Quasar documentation assumes you are already familiar with "),s(r,{to:"https://github.com/vuejs/vue-router"},{default:e(()=>[t("Vue Router")]),_:1}),t(". Below it’s described only the basics of how to make use of it in a Quasar CLI project. For the full list of its features please visit the "),s(r,{to:"https://router.vuejs.org/"},{default:e(()=>[t("Vue Router documentation")]),_:1}),t(".")])]),s(a(p),null,{default:e(()=>[v,s(c)]),_:1}),z,s(a(p),null,{default:e(()=>[b,s(c)]),_:1}),C,n("h2",{id:"lazy-load-components",class:"doc-heading doc-h2",onClick:o[1]||(o[1]=i=>a(l)("lazy-load-components"))},"Lazy-load components"),L,s(a(p),null,{default:e(()=>[x,s(c)]),_:1}),S,s(a(p),null,{default:e(()=>[V,s(c)]),_:1}),n("h2",{id:"lazy-load-on-the-fly",class:"doc-heading doc-h2",onClick:o[2]||(o[2]=i=>a(l)("lazy-load-on-the-fly"))},"Lazy-load on the fly"),I,s(a(p),null,{default:e(()=>[N,s(c)]),_:1}),P,s(a(p),null,{default:e(()=>[j,s(c)]),_:1}),n("h2",{id:"importing-with-vite",class:"doc-heading doc-h2",onClick:o[3]||(o[3]=i=>a(l)("importing-with-vite"))},"Importing with Vite"),n("h3",{id:"dynamic-import-statements",class:"doc-heading doc-h3",onClick:o[4]||(o[4]=i=>a(l)("dynamic-import-statements"))},"Dynamic import statements"),s(a(p),null,{default:e(()=>[D,s(c)]),_:1}),n("h3",{id:"other-import-options",class:"doc-heading doc-h3",onClick:o[5]||(o[5]=i=>a(l)("other-import-options"))},"Other import options"),n("p",null,[t("More info on importing assets with Vite "),s(r,{to:"https://vitejs.dev/guide/assets.html"},{default:e(()=>[t("here")]),_:1}),t(".")])]),_:1}))}},F=d(B,[["__file","lazy-loading.md"]]);export{F as default};
