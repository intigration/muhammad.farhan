import{b as d,d as m,w as e,h as n,f as o,i as s,e as t,k as r}from"./vendor.js";import{c as u}from"./_examples_frameless-electron-window.js";import{D as h,a}from"./DocPage.js";import{D as l}from"./DocPrerender.js";import{C as p}from"./CopyButton.js";import{_ as f}from"./index.js";const x=n("p",null,[s("The "),n("code",{class:"doc-token"},"ssrContext"),s(" Object is the SSR context with which all the app’s Vue components are rendered with.")],-1),w=n("div",{class:"doc-note doc-note--warning"},[n("p",{class:"doc-note__title"},"WARNING"),n("p",null,[s("The "),n("code",{class:"doc-token"},"ssrContext"),s(" Object is available only on SSR builds, on the server-side compilation (when "),n("code",{class:"doc-token"},"process∙env∙SERVER === true"),s(").")])],-1),_=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token comment"},"// a boot file"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},","),s(" ssrContext "),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"/* ... */"),s(),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// src/router/index.[js|ts]"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},","),s(" ssrContext "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"/* ... */"),s(),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// src/store/index.[js|ts]"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},","),s(" ssrContext "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"/* ... */"),s(),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// with preFetch:"),s(`
`),n("span",{class:"token function"},"preFetch"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},","),s(" ssrContext "),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"/* ... */"),s(),n("span",{class:"token punctuation"},"}")])],-1),b=n("p",null,"You can also access the ssrContext in your Vue components. Below are two examples, one with Composition API and one with Options API:",-1),y=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" useSSRContext "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// ..."),s(`
  `),n("span",{class:"token function"},"setup"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// we need to guard it and call it only on SSR server-side:"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" ssrContext "),n("span",{class:"token operator"},"="),s(" process"),n("span",{class:"token punctuation"},"."),s("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"SERVER"),s(),n("span",{class:"token operator"},"?"),s(),n("span",{class:"token function"},"useSSRContext"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"null"),s(`
    `),n("span",{class:"token comment"},"// ...do something with it"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}")])],-1),g=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// ..."),s(`
  `),n("span",{class:"token function"},"created"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"// can be any other Vue component lifecycle hook"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s(`ssrContext
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}")])],-1),C=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"ssrContext"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
  req`),n("span",{class:"token punctuation"},","),s("        "),n("span",{class:"token comment"},"// Express.js object"),s(`
  res`),n("span",{class:"token punctuation"},","),s("        "),n("span",{class:"token comment"},"// Express.js object"),s(`
  $q`),n("span",{class:"token punctuation"},","),s("         "),n("span",{class:"token comment"},"// The Quasar's $q Object"),s(`
  state`),n("span",{class:"token punctuation"},","),s("      "),n("span",{class:"token comment"},"// The Vuex state (ONLY if using the Vuex store)"),s(`

  nonce`),n("span",{class:"token punctuation"},","),s("      "),n("span",{class:"token comment"},"// (optional to set it yourself)"),s(`
              `),n("span",{class:"token comment"},'// The global "nonce" attribute to use'),s(`

  onRendered`),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Registers a function to be executed server-side after"),s(`
              `),n("span",{class:"token comment"},"// app has been rendered with Vue. You might need this"),s(`
              `),n("span",{class:"token comment"},"// to access ssrContext again after it has been fully processed."),s(`
              `),n("span",{class:"token comment"},"// Example: ssrContext.onRendered(() => { /* ... */ })"),s(`

  rendered    `),n("span",{class:"token comment"},"// (optional to set it yourself)"),s(`
              `),n("span",{class:"token comment"},"// Set this to a function which will be executed server-side"),s(`
              `),n("span",{class:"token comment"},"// after the app has been rendered with Vue."),s(`
              `),n("span",{class:"token comment"},'// We recommend using the "onRendered" instead.'),s(`
              `),n("span",{class:"token comment"},"//"),s(`
              `),n("span",{class:"token comment"},"// Purpose: backward compatibility with Vue ecosystem packages"),s(`
              `),n("span",{class:"token comment"},"// (like @vue/apollo-ssr)"),s(`
              `),n("span",{class:"token comment"},"// Example: ssrContext.rendered = () => { /* ... */ }"),s(`
`),n("span",{class:"token punctuation"},"}")])],-1),v=n("p",null,[s("The "),n("code",{class:"doc-token"},"req"),s(" and "),n("code",{class:"doc-token"},"res"),s(" are Express.js’s objects for the current server client. One use-case for "),n("code",{class:"doc-token"},"req"),s(" is accessing "),n("code",{class:"doc-token"},"req.url"),s(" to get the URL that the client is requesting.")],-1),R=n("div",{class:"doc-note doc-note--tip"},[n("p",{class:"doc-note__title"},"TIP"),n("p",null,[s("Feel free to inject your own stuff into ssrContext too, but do NOT tamper with any of the private props (props that start with an underscore, eg. "),n("code",{class:"doc-token"},"_someProp"),s(").")])],-1),q={__name:"ssr-context",setup(S){const i=[{id:"usage",title:"2. Usage"},{id:"anatomy-of-ssrcontext",title:"3. Anatomy of ssrContext"}];return(V,c)=>(d(),m(h,{title:"The ssrContext Object",desc:"(@quasar/app-webpack) The ssrContext Object in Quasar SSR",overline:"Quasar CLI with Webpack - @quasar/app-webpack",heading:"","edit-link":"quasar-cli-webpack/developing-ssr/ssr-context",toc:i},{default:e(()=>[x,n("h2",{id:"usage",class:"doc-heading doc-h2",onClick:c[0]||(c[0]=k=>o(u)("usage"))},"Usage"),w,n("p",null,[s("Among other places, it is supplied as parameter to "),t(a,{to:"/quasar-cli-webpack/boot-files"},{default:e(()=>[s("boot files")]),_:1}),s(", to the "),t(a,{to:"/quasar-cli-webpack/state-management-pinia-vuex"},{default:e(()=>[s("Vuex store")]),_:1}),s(" and "),t(a,{to:"/quasar-cli-webpack/routing"},{default:e(()=>[s("Vue Router")]),_:1}),s(" initialization functions, and to the "),t(a,{to:"/quasar-cli-webpack/prefetch-feature"},{default:e(()=>[s("preFetch")]),_:1}),s(" method:")]),t(o(l),null,{default:e(()=>[_,t(p)]),_:1}),b,t(o(l),{tabs:["Composition API","Options API"]},{default:e(()=>[t(r,{class:"q-pa-none",name:"Composition API"},{default:e(()=>[y,t(p)]),_:1}),t(r,{class:"q-pa-none",name:"Options API"},{default:e(()=>[g,t(p)]),_:1})]),_:1}),n("h2",{id:"anatomy-of-ssrcontext",class:"doc-heading doc-h2",onClick:c[1]||(c[1]=k=>o(u)("anatomy-of-ssrcontext"))},"Anatomy of ssrContext"),t(o(l),null,{default:e(()=>[C,t(p)]),_:1}),n("p",null,[s("More information on the purpose of the “nonce” property is available on "),t(a,{to:"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce"},{default:e(()=>[s("MDN")]),_:1}),s(".")]),v,R]),_:1}))}},I=f(q,[["__file","ssr-context.md"]]);export{I as default};
