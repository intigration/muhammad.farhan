import{c as i}from"./_examples_frameless-electron-window.js";import{D as d,a as s}from"./DocPage.js";import{D as c}from"./DocPrerender.js";import{C as l}from"./CopyButton.js";import{_ as k}from"./index.js";import{b as g,d as y,w as o,h as n,i as a,e as t,f as e}from"./vendor.js";const h=n("p",null,"Getting to know your users and measuring user behavior is an important step in App Development. Unfortunately, it takes a bit of non-standard work to get Google Analytics to work after wrapping your mobile app with Capacitor. Setting up Google Analytics in a pure web application is quite easy, but Capacitor somehow prevents pageviews and events from being sent to Google Analytics.",-1),m=n("p",null,"Follow this guide to implement Google Analytics into your Capacitor powered Quasar App.",-1),f=n("div",{class:"doc-note doc-note--warning"},[n("p",{class:"doc-note__title"},"WARNING"),n("p",null,[a("You’ll need to include a "),n("code",{class:"doc-token"},"<script>"),a(" tag provided by Google in /index.html or /src/index.template.html, which will make your App depend on an Internet connection!")])],-1),w=n("code",{class:"doc-token"},"ga.logPage",-1),_=n("li",null,"Have Basic knowledge of Google Analytics",-1),v={class:"doc-note"},b=n("code",{class:"doc-token"},"index.html",-1),A=n("code",{class:"doc-token"},"analytics.js",-1),G=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"export"),a(),n("span",{class:"token keyword"},"default"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token function"},"logEvent"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("category"),n("span",{class:"token punctuation"},","),a(" action"),n("span",{class:"token punctuation"},","),a(" label"),n("span",{class:"token punctuation"},","),a(" sessionId "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"null")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    window`),n("span",{class:"token punctuation"},"."),a("dataLayer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token literal-property property"},"appEventCategory"),n("span",{class:"token operator"},":"),a(" category"),n("span",{class:"token punctuation"},","),a(`
      `),n("span",{class:"token literal-property property"},"appEventAction"),n("span",{class:"token operator"},":"),a(" action"),n("span",{class:"token punctuation"},","),a(`
      `),n("span",{class:"token literal-property property"},"appEventLabel"),n("span",{class:"token operator"},":"),a(" label"),n("span",{class:"token punctuation"},","),a(`
      `),n("span",{class:"token literal-property property"},"sessionId"),n("span",{class:"token operator"},":"),a(` sessionId
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
    window`),n("span",{class:"token punctuation"},"."),a("dataLayer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token string-property property"},"'event'"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"'appEvent'"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

  `),n("span",{class:"token function"},"logPage"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("path"),n("span",{class:"token punctuation"},","),a(" name"),n("span",{class:"token punctuation"},","),a(" sessionId "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"null")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    window`),n("span",{class:"token punctuation"},"."),a("dataLayer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token literal-property property"},"screenPath"),n("span",{class:"token operator"},":"),a(" path"),n("span",{class:"token punctuation"},","),a(`
      `),n("span",{class:"token literal-property property"},"screenName"),n("span",{class:"token operator"},":"),a(" name"),n("span",{class:"token punctuation"},","),a(`
      `),n("span",{class:"token literal-property property"},"sessionId"),n("span",{class:"token operator"},":"),a(` sessionId
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
    window`),n("span",{class:"token punctuation"},"."),a("dataLayer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token string-property property"},"'event'"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"'appScreenView'"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}")])],-1),I=n("p",null,"To make sure all the pages in your application are automatically posted to Google Analytics, we create an app boot file:",-1),q=n("pre",{class:"doc-code"},[n("code",null,[a("$ quasar new boot google-analytics "),n("span",{class:"token punctuation"},"["),a("--format ts"),n("span",{class:"token punctuation"},"]")])],-1),C=n("p",null,[a("Then we edit the newly created file: "),n("code",{class:"doc-token"},"/src/boot/google-analytics.js"),a(":")],-1),P=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(" ga "),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},"'analytics.js'"),a(`

`),n("span",{class:"token keyword"},"export"),a(),n("span",{class:"token keyword"},"default"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token punctuation"},"{"),a(" router "),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"afterEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("to"),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"from")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
    ga`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"logPage"),n("span",{class:"token punctuation"},"("),a("to"),n("span",{class:"token punctuation"},"."),a("path"),n("span",{class:"token punctuation"},","),a(" to"),n("span",{class:"token punctuation"},"."),a("name"),n("span",{class:"token punctuation"},","),a(" sessionId"),n("span",{class:"token punctuation"},")"),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
`),n("span",{class:"token punctuation"},"}")])],-1),x=n("p",null,[a("Finally we register the app boot file in the "),n("code",{class:"doc-token"},"/quasar.config"),a(" file. We can do so only for Capacitor wrapped apps if we want:")],-1),D=n("pre",{class:"doc-code"},[n("code",null,[n("span",{class:"token literal-property property"},"boot"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"["),a(`
  ctx`),n("span",{class:"token punctuation"},"."),a("mode"),n("span",{class:"token punctuation"},"."),a("capacitor "),n("span",{class:"token operator"},"?"),a(),n("span",{class:"token string"},"'google-analytics'"),a(),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"''"),a(`
`),n("span",{class:"token punctuation"},"]")])],-1),L=n("p",null,"You’ll see the events and pageviews coming in when you run your app. It usually takes around 5 to 10 seconds for a pageview to be registered in the realtime view.",-1),M={__name:"managing-google-analytics",setup(T){const u=[{id:"prerequisites",title:"2. Prerequisites"},{id:"preparation",title:"3. Preparation"},{id:"implementing-this-into-application",title:"4. Implementing this into application"}];return(j,p)=>(g(),y(d,{title:"Managing Google Analytics",desc:"(@quasar/app-webpack) How to use analytics in a Quasar hybrid mobile app with Capacitor.",overline:"Quasar CLI with Webpack - @quasar/app-webpack",heading:"","edit-link":"quasar-cli-webpack/developing-capacitor-apps/managing-google-analytics",toc:u},{default:o(()=>[h,m,n("p",null,[a("You may also want to read this great tutorial: "),t(s,{to:"https://jannerantala.com/tutorials/quasar-framework-google-tag-manager-and-analytics-setup-for-an-spa-website/"},{default:o(()=>[a("Google Tag Manager and Analytics Setup for an SPA Website")]),_:1})]),f,n("h2",{id:"prerequisites",class:"doc-heading doc-h2",onClick:p[0]||(p[0]=r=>e(i)("prerequisites"))},"Prerequisites"),n("ul",null,[n("li",null,[a("Make sure all your routes have a name and path parameter specified. Otherwise, they cannot be posted to the "),w,a(" function. Please refer to "),t(s,{to:"/quasar-cli-webpack/routing"},{default:o(()=>[a("Routing")]),_:1}),a(" for more info on routing.")]),_]),n("h2",{id:"preparation",class:"doc-heading doc-h2",onClick:p[1]||(p[1]=r=>e(i)("preparation"))},"Preparation"),n("p",null,[a("Before we can start implementing Google Analytics into your application, you’ll need an account for "),t(s,{to:"https://analytics.google.com"},{default:o(()=>[a("Google Analytics")]),_:1}),a(" and "),t(s,{to:"https://tagmanager.google.com/"},{default:o(()=>[a("Google Tagmanager")]),_:1}),a(". So let’s do that first. When you have these accounts, it’s time to configure Tag manager. Follow the steps in this "),t(s,{to:"https://www.multiminds.eu/blog/2016/12/google-analytics-and-tag-manager-with-ionic-and-cordova-apps/"},{default:o(()=>[a("Multiminds article")]),_:1}),a(" to do so.")]),n("h2",{id:"implementing-this-into-application",class:"doc-heading doc-h2",onClick:p[2]||(p[2]=r=>e(i)("implementing-this-into-application"))},"Implementing this into application"),n("blockquote",v,[n("p",null,[a("For this guide, we’ll assume you have a fixed sessionId that you send to Google Analytics. Google Analytics uses a sessionId to distinguish different users from each other. If you want to create an anonymous sessionId, see "),t(s,{to:"https://developers.google.com/analytics/devguides/collection/analyticsjs/cookies-user-id"},{default:o(()=>[a("Analytics Documentation on user id")]),_:1}),a(".")])]),n("p",null,[a("Place the Tag Manager snippet into head of your "),b,a(" file (if you’ve followed the "),t(s,{to:"http://www.multiminds.eu/2016/12/06/google-analytics-tag-manager-ionic-cordova/"},{default:o(()=>[a("Multiminds article")]),_:1}),a(", you already have this.) Create a new file in your codebase called "),A,a(" with the following contents:")]),t(e(c),null,{default:o(()=>[G,t(l)]),_:1}),I,t(e(c),null,{default:o(()=>[q,t(l,{lang:"bash"})]),_:1}),C,t(e(c),null,{default:o(()=>[P,t(l)]),_:1}),x,t(e(c),null,{default:o(()=>[D,t(l)]),_:1}),n("p",null,[a("More information about events can be found in the "),t(s,{to:"https://developers.google.com/analytics/devguides/collection/analyticsjs/events"},{default:o(()=>[a("Analytics documentation on events")]),_:1}),a(".")]),L]),_:1}))}},V=k(M,[["__file","managing-google-analytics.md"]]);export{V as default};
